{"version":3,"sources":["utils/gql.js","utils/auth.js","constants/action-types.js","utils/request.js","actions/index.js","queries/index.js","PrivateComponent.js","ScrollWatch.js","Frame.js","Login.js","Register.js","FourOhFour.js","PrivateRoute.js","Home.js","Calendario.js","NuevoUsuario.js","Documentos.js","Usuarios.js","EditUsuario.js","Analitica.js","modulosConfig/ModuloRegistros.js","Registro.js","Perfil.js","Grupos.js","modulosConfig/ModuloFestivos.js","Configuracion.js","reducers/index.js","reducers/usuarios.js","reducers/dias.js","reducers/es.js","reducers/documentos.js","reducers/blueCollar.js","store/index.js","App.js","serviceWorker.js","index.js"],"names":["gql","query","variables","arguments","length","undefined","baseURL","console","log","replace","split","map","elem","i","reduce","a","b","getToken","window","localStorage","getItem","JSON","parse","getHeaders","anonymous","type","jwt","headers","Accept","Content-Type","Authorization","getUserInfo","user","includes","saveAuthData","authdata","setItem","stringify","CARGAR_USUARIOS","CARGAR_CALENDARIO","CARGAR_ES","CARGAR_DOCUMENTOS","CAMBIAR_BLUE_COLLAR","parseJSON","response","json","checkStatus","status","then","responseFormatted","errors","forEach","e","error","Error","statusText","payload","request","url","options","Object","assign","token","concat","params","keys","k","encodeURIComponent","join","formatQueryParams","body","fetch","process","fetchUsuarios","dispatch","equipo","catch","fetchCalendario","data","dias","fetchES","users","fetchDocumentos","PrivateComponent","Component","userInfo","blocked","role","name","manager","this","props","children","Header","Layout","Footer","Sider","Content","Title","Typography","Paragraph","Frame","state","username","avatar","local","cerrarSesion","removeItem","message","info","_this","history","push","socket","on","msg","es","_this2","dia","registros","apply","u","r","aprobado","diasPorConfirmar","registrosPorConfirmar","usuariosPorConfirmar","usuarios","confirmed","setState","prevProps","prevState","_this3","isLogged","menuAvatar","react_default","createElement","menu","Item","Link","to","onClick","blueCollar","style","minHeight","display","flexDirection","key","backgroundColor","alignItems","justifyContent","color","margin","src","alt","filter","height","marginRight","dropdown","overlay","boxShadow","toUpperCase","layout","flex","theme","mode","selectedKeys","location","pathname","badge","transform","position","marginLeft","count","icon","className","href","target","rel","padding","paddingBottom","aria-label","socketConnect","connect","withRouter","Login","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","handleSubmit","preventDefault","form","validateFields","err","values","method","identifier","userName","password","resp","statusCode","fieldsError","_this$props$form","getFieldDecorator","getFieldsError","getFieldError","isFieldTouched","userNameError","passwordError","src_Frame","card","width","maxWidth","es_form","onSubmit","validateStatus","help","rules","required","input","onChange","value","prefix","placeholder","pw","es_row","col","span","es_button","htmlType","disabled","some","field","Form","create","Register","password2","validateEmail","email","errorEmail","errorPw","errorUser","test","String","toLowerCase","emailError","password2Error","FourOhFour","typography","textAlign","PrivateRoute","_ref","component","_ref$onlyManager","onlyManager","rest","objectWithoutProperties","Route","render","Redirect","from","Home","Calendario","modalPedirDia","diasFilter","diasPorAprobar","festivos","festivosArrUTC","sel1","sel2","fetchDias","_callee","regenerator_default","wrap","_context","prev","next","organizarDias","stop","d","tipo","f","objectSpread","fecha","moment","utc","hour","minute","seconds","milliseconds","format","filtrarDias","_id","primerFiltro","responderSolicitud","bool","success","getListData","dateFullCellRender","listData","valueUTC","festivo","find","tc","title","nombre","day","borderRadius","date","item","popover","content","solicitarDia","_getUserInfo","toConsumableArray","lanzarModalDia","misDias","isSameOrBefore","isSame","pedido","warning","columns","dataIndex","row","text","record","popconfirm","onConfirm","evt","tag","es_radio","Group","defaultValue","buttonStyle","Button","calendar","onSelect","src_PrivateComponent","table","dataSource","modal","visible","onCancel","footer","NuevoUsuario","solicitarAcceso","unirse","equipos","ok","crearEquipo","crear","unirseError","crearError","marginBottom","NuevoUsuario_Title","level","errorUnirse","errorCrear","Documentos","fileList","asociarA","selectedUser","documentos","disponibleParaTodos","misArchColumns","file","desvincularArchivo","borrarArchivo","archGlobColumns","archUserColumns","rowSelection","selectedRowKeys","selectedRows","getCheckboxProps","docId","documento","archivo","sent","_callee2","_context2","handleUpload","_callee5","promisingPromises","arrayArchivos","promesitas","_context5","_ref4","asyncToGenerator","mark","_callee3","doc","_context3","global","FormData","append","abrupt","_x4","Promise","all","mostrarListaUsuarios","_ref5","_callee4","userId","antDocus","_context4","_x5","t0","upload","Dragger","action","multiple","beforeUpload","onRemove","uid","es_checkbox","checked","collapse","bordered","activeKey","Panel","es_select","showSearch","optionFilterProp","op","filterOption","option","indexOf","Option","rowKey","marginTop","Usuarios","extraColumnsA","extraColumnsA2","extraColumnsB","filtraUsuarios","activos","pendientes","fetchUsers","usuario","desasociarTarjeta","idcard","defineProperty","twoToneColor","modalAsociar","usuarioAsociar","off","_this4","_this$state","onOk","EditUsuario","duracionjornada","frasesStr","frases","frasePr","frasePrAct","guardarDatos","frasePrioritaria","actFrasePrioritaria","match","id","label","TextArea","rows","Analitica","ModuloRegistros","addRegistro","idUser","fechaEntrada","fechaSalida","ePasado","sPasado","eAntesDeS","registroEntrada","registroSalida","fechaNuevoRegistro","horaEntradaNuevoRegistro","horaSalidaNuevoRegistro","clone","isBefore","ultimoEditor","cerrarModal","Select","flexWrap","date_picker","time_picker","Registro","mes","modalVisible","modalLoading","defaultSortOrder","sorter","entrada","diff","hora","horas","Math","trunc","round","tiempoDescanso","diasLaborables","month","year","diasFestivos","Array","daysInMonth","fill","weekday","procesaES","diasDeEseMes","duracionJornada","jornadas","subtract","sort","arrayCachos","ceil","j","m","duration","as","salida","comienzoDescanso","finDescanso","arrayHoras","c","slice","idsRegistros","horasTrabajadas","h","horasMes","porcentajeHoras","horasPendientes","jornadasPorAprobar","isArray","jornadaPendiente","accion","ids","MonthPicker","DatePicker","locale","emptyText","header","paddingRight","progress","percent","statistic","modalUser","handleNuevoRegistro","modulosConfig_ModuloRegistros","Perfil","loading","onSuccess","onError","imgToUpload","isJPG","isLt2M","size","handleSave","uploadButton","imageUrl","listType","showUploadList","handleChange","customRequest","Grupos","Collapse","defaultActiveKey","ModuloFestivos","addFestivo","borrarFestivo","marginTOp","colon","Configuracion","modulosConfig_ModuloFestivos","rootReducer","combineReducers","store","createStore","applyMiddleware","thunk","io","transports","App","locale_provider","es_ES","build","BrowserRouter","Switch","exact","path","PrivateRoute_PrivateRoute","Boolean","hostname","ReactDOM","src_App","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.306df586.chunk.js","sourcesContent":["export default function gql(query, variables = {}, baseURL = \"\"){\n    if( query === undefined ){ console.log(\"El parámetro 'query' de la funcion gql está vacío\") }\n    const queryReplace = query\n                    .replace(/\\n/gi,   \"%0A\")\n                    .replace(/:/gi,    \"%3A\")\n                    .replace(/\\\\/gi,   \"%22\")\n                    .replace(/ {2}/gi, \"%09\")\n                    .replace(/ /gi,    \"%20\")\n                    .replace(/{/gi,    \"%7B\")\n                    .replace(/}/gi,    \"%7D\")\n                    .replace(/\\(/gi,   \"%28\")\n                    .replace(/\\)/gi,   \"%29\")\n\n    const queryUgly = queryReplace.split(\"$\").map((elem, i) => {\n        if(i%2){ //Es una variable\n            return variables[elem]\n        }\n        else{ //No es una variable\n            return elem\n        }\n    }).reduce((a, b) => a + b, \"\")\n                    \n    return baseURL + \"/graphql?query=\" + queryUgly\n}","import gql from './gql'\n\nexport function getToken(){\n    return window.localStorage.getItem('jwt') !== \"undefined\" ? JSON.parse(window.localStorage.getItem('jwt')) : undefined\n}\n\nexport function getHeaders(anonymous = false, type = \"application/json\"){\n    const jwt = getToken();\n    let headers = {\n        \"Accept\": type,\n        \"Content-Type\": type\n    }\n    if(jwt && !anonymous){ headers.Authorization = \"Bearer \" + jwt }\n    return headers\n}\n\nexport function getUserInfo(){\n    const user = window.localStorage.getItem('user')\n    const userObj = ![\"undefined\", \"\", undefined].includes(user) ? JSON.parse(window.localStorage.getItem('user')) : undefined\n    return userObj\n}\n\nexport function saveAuthData(authdata){\n    //authdata.avatar = getAvatar()\n    window.localStorage.setItem('jwt', JSON.stringify(authdata.jwt))\n    window.localStorage.setItem('user', JSON.stringify(authdata.user))\n}\n\nexport function clearData(){\n    window.localStorage.removeItem('jwt')\n    window.localStorage.removeItem('user')\n}","export const CARGAR_USUARIOS = \"CARGAR_USUARIOS\"\nexport const CARGAR_CALENDARIO = \"CARGAR_CALENDARIO\"\nexport const CARGAR_ES = \"CARGAR_ES\"\nexport const CARGAR_DOCUMENTOS = \"CARGAR_DOCUMENTOS\"\nexport const CAMBIAR_BLUE_COLLAR = \"CAMBIAR_BLUE_COLLAR\"\n","import 'whatwg-fetch';\nimport { getToken } from './auth';\n/**\n * Parses the JSON returned by a network request\n *\n * @param  {object} response A response from a network request\n *\n * @return {object}          The parsed JSON from the request\n */\nfunction parseJSON(response) {\n  return response.json ? response.json() : response;\n}\n\n/**\n * Checks if a network request came back fine, and throws an error if not\n *\n * @param  {object} response   A response from a network request\n *\n * @return {object|undefined} Returns either the response, or throws an error\n */\nfunction checkStatus(response) {\n  if (response.status >= 200 && response.status < 300) {\n    return response;\n  }\n\n  return parseJSON(response).then(responseFormatted => {\n    if( responseFormatted.errors ){ responseFormatted.errors.forEach(e => { console.log( e ) }) }\n    const error = new Error(response.statusText);\n    error.response = response;\n    error.response.payload = responseFormatted;\n    throw error;\n  });\n}\n\n/**\n * Format query params\n *\n * @param params\n * @returns {string}\n */\nfunction formatQueryParams(params) {\n  return Object.keys(params)\n    .map(k => `${encodeURIComponent(k)}=${encodeURIComponent(params[k])}`)\n    .join('&');\n}\n\n/**\n * Requests a URL, returning a promise\n *\n * @param  {string} url       The URL we want to request\n * @param  {object} [options] The options we want to pass to \"fetch\"\n *\n * @return {object}           The response data\n */\nexport default function request(\n  url,\n  options = {},\n  stringify = true\n) {\n  // Set headers\n  if (stringify) {\n\n    options.headers = Object.assign(\n      {\n        'Content-Type': 'application/json',\n      },\n      options.headers,\n      {}\n    );\n  }\n\n  const token = getToken();\n\n  if (token) {\n    options.headers = Object.assign(\n      {\n        Authorization: `Bearer ${token}`,\n      },\n      options.headers\n    );\n  }\n\n  if (options && options.params) {\n    const params = formatQueryParams(options.params);\n    url = `${url}?${params}`;\n  }\n\n  // Stringify body object\n  if (options && options.body && stringify) {\n    options.body = JSON.stringify(options.body);\n  }\n\n  return fetch(process.env.REACT_APP_API_URL + url, options)\n    .then(checkStatus)\n    .then(parseJSON);\n}\n","import { \n    CARGAR_USUARIOS, CARGAR_CALENDARIO, CARGAR_ES, CARGAR_DOCUMENTOS, CAMBIAR_BLUE_COLLAR\n} from \"../constants/action-types\"\nimport request from \"../utils/request\"\nimport gql from \"../utils/gql\"\nimport { getUserInfo } from '../utils/auth'\nimport { queryCalendario, queryES } from '../queries'\n\nexport function cambiarBlueCollar(payload) {\n    return {\n        type: CAMBIAR_BLUE_COLLAR,\n        payload\n    }\n}\n\nexport function cargarUsuarios(payload) {\n    return {\n        type: CARGAR_USUARIOS,\n        payload\n    }\n}\n  \nexport const fetchUsuarios = () => {\n    return (dispatch) => {\n        const equipo = getUserInfo() && getUserInfo().equipo\n        return request(\"/users?_limit=0&equipo=\" + equipo).then(response => {\n            dispatch(cargarUsuarios(response))\n        })\n        .catch(error => {\n            throw(error);\n        });\n    };\n};\n\nexport function cargarCalendario(payload) {\n    return {\n        type: CARGAR_CALENDARIO,\n        payload\n    }\n}\n  \nexport const fetchCalendario = () => {\n    return (dispatch) => {\n        return request(gql(queryCalendario(getUserInfo()))).then(response => {\n            dispatch(cargarCalendario(response.data.dias))\n        })\n        .catch(error => {\n            throw(error);\n        });\n    };\n};\n\nexport function cargarES(payload) {\n    return {\n        type: CARGAR_ES,\n        payload\n    }\n}\n  \nexport const fetchES = () => {\n    return (dispatch) => {\n        return request(gql(queryES(getUserInfo()))).then(response => {\n            dispatch(cargarES(response.data.equipo && response.data.equipo.users))\n        })\n        .catch(error => {\n            throw(error);\n        });\n    };\n};\n\nexport function cargarDocumentos(payload) {\n    return {\n        type: CARGAR_DOCUMENTOS,\n        payload\n    }\n}\n  \nexport const fetchDocumentos = () => {\n    return (dispatch) => {\n        return request(\"/documentos?_limit=0\").then(response => {\n            dispatch(cargarDocumentos(response))\n        })\n        .catch(error => {\n            throw(error);\n        });\n    };\n};","export function queryCalendario(variables){\n    return variables.equipo ? `{\n    dias(where: { equipo: \"${ variables.equipo }\" }, limit: 10000){\n        _id\n        fecha\n        tipo\n        aprobado\n        nombre\n        user{\n            _id\n            username\n            avatar{\n                url\n            }\n        }\n    }\n}` : \"{}\"\n}\n\nexport function queryES(variables){\n    return variables.equipo ? `{\n    equipo(id: \"${ variables.equipo }\"){\n        users{\n            _id\n            username\n            avatar{\n                url\n            }\n            registros{\n                _id\n                fecha\n                idcard\n                aprobado\n                user{\n                    _id\n                    username\n                }\n                ultimoEditor{\n                    _id\n                    username\n                }\n            }\n            duracionjornada\n        }\n    }\n}` : \"{}\"\n}","import { Component } from 'react';\nimport { getUserInfo } from './utils/auth';\n//import { includes as lodashIncludes } from 'lodash';\n\nclass PrivateComponent extends Component {\n\n  render() {\n    const userInfo = getUserInfo()\n    const authData = (typeof userInfo === \"object\" && userInfo !== null && userInfo.blocked === false ) ? userInfo : {\n      role: {\n        name: \"Not Authorised\"\n      }\n    };\n    return authData.manager ? this.props.children : \"\";\n  }\n}\n\nexport default PrivateComponent","import React, { Component } from 'react'\n\nclass ScrollWatch extends Component{\n\n    isBottom(el) {\n        return el.getBoundingClientRect().bottom <= window.innerHeight;\n    }\n      \n    onScroll = e => {\n        console.log(e)\n        const wrappedElement = document.getElementById('header');\n        if (this.isBottom(wrappedElement)) {\n          console.log('header bottom reached');\n          document.removeEventListener('scroll', this.trackScrolling);\n        }\n    };\n\n    render(){\n        return(\n            <div onScroll={this.onScroll}>\n                { this.props.children }\n            </div>\n        )\n    }\n}\n\nexport default ScrollWatch","import React, { Component } from 'react'\nimport { Menu, Layout, Typography, Avatar, Badge, Dropdown, Icon, message, Button } from 'antd'\nimport { Link, withRouter } from 'react-router-dom'\nimport { getUserInfo, clearData, getAvatar } from './utils/auth';\nimport { socketConnect } from 'socket.io-react';\nimport { connect } from 'react-redux';\nimport { fetchES, cambiarBlueCollar, fetchCalendario, fetchUsuarios } from './actions';\nimport ScrollWatch from './ScrollWatch';\nimport PrivateComponent from './PrivateComponent';\nimport request from './utils/request';\n\nconst { Header, Footer, Sider, Content } = Layout;\nconst { Title, Paragraph } = Typography;\n\nclass Frame extends Component{\n    state = {\n        user: {\n            username: \" \",\n            avatar: {}\n        },\n        local: false\n    }\n\n    cerrarSesion = () => {\n        clearData();\n        message.info(\"¡Vuelve pronto!\")\n        this.props.history.push(\"/login\")\n    }\n\n    async componentDidMount(){\n        const user = getUserInfo()\n        this.props.socket.on('notification', msg => {\n            if(msg.es){\n                this.props.dispatch(fetchES())\n            }\n            else if(msg.dia){\n                this.props.dispatch(fetchCalendario())\n            }\n            else if(msg.user){\n                this.props.dispatch(fetchUsuarios())\n            }\n        });\n\n        // const local = await fetch(\"http://192.168.1.65:24491/holi\")\n        // if(local.ok){ this.setState({ local: true })}\n\n        const registros = [].concat.apply([], this.props.es.map(u => u.registros)).map(r => r.aprobado)\n        const diasPorConfirmar = this.props.dias.map(u => u.aprobado).includes(null) || this.props.dias.map(u => u.aprobado).includes(false) ? true : false\n        const registrosPorConfirmar = registros.includes(false) || registros.includes(null) ? true : false\n        const usuariosPorConfirmar = this.props.usuarios.map(u => u.confirmed).includes(false) ? true : false\n\n        this.setState({ \n            user,\n            diasPorConfirmar,\n            registrosPorConfirmar,\n            usuariosPorConfirmar\n        })\n    }\n\n    componentDidUpdate(prevProps, prevState){\n        if(this.props.dias !== prevProps.dias){\n            if(this.props.dias.map(u => u.aprobado).includes(null) || this.props.dias.map(u => u.aprobado).includes(false)){\n                this.setState({ diasPorConfirmar: true })\n            }\n            else{ this.setState({ diasPorConfirmar: false }) }\n        }\n        else if(this.props.es !== prevProps.es){\n            const registros = [].concat.apply([], this.props.es.map(u => u.registros)).map(r => r.aprobado)\n            if(registros.includes(false) || registros.includes(null)){\n                this.setState({ registrosPorConfirmar: true})\n            }\n            else{ this.setState({ registrosPorConfirmar: false }) }\n        }\n        else if(this.props.usuarios !== prevProps.usuarios){\n            if(this.props.usuarios.map(u => u.confirmed).includes(false)){\n                this.setState({ usuariosPorConfirmar: true })\n            }\n            else{ this.setState({ usuariosPorConfirmar: false }) }\n        }\n    }\n\n    render(){\n        const { user } = this.state\n        const { isLogged } = this.props\n        const menuAvatar = (\n            <Menu>\n                <Menu.Item>\n                    <Link to=\"/perfil\">Perfil</Link>\n                </Menu.Item>\n                <Menu.Item onClick={this.cerrarSesion}>\n                    <span>Cerrar sesión</span>\n                </Menu.Item>\n                {(user && user.manager) && \n                    <Menu.Item onClick={() => this.props.dispatch(cambiarBlueCollar(!this.props.blueCollar))}>\n                        <span>{ this.props.blueCollar ? \"Modo Manager\" : \"Modo Blue Collar\" }</span>\n                    </Menu.Item>\n                }\n            </Menu>\n        );\n\n        return (\n            <div style={{ minHeight: \"100vh\", display: \"flex\", flexDirection: \"column\" }}>\n                <Header key=\"header\" style={{ backgroundColor: \"black\", display: \"flex\", alignItems: \"center\", justifyContent: \"space-between\" }}>\n                    <Title style={{ color: \"#f0f0f0\", margin: \"0.25em\", display: \"flex\", alignItems: \"center\" }}>\n                        <img src={process.env.REACT_APP_API_URL + \"/logo.png\"} alt=\"Blacknosaur Logo\" style={{ filter: \"invert(1)\", height: 45, marginRight: 20 }} /> Portal del Blacknosaurio\n                    </Title>\n                    { isLogged &&\n                        <Dropdown overlay={menuAvatar}>\n                            <Avatar style={{ boxShadow: this.props.blueCollar ? \"inset 0 0 4px 1px blue\" : \"none\" }} src={(user && user.avatar) && (process.env.REACT_APP_API_URL + user.avatar.url)}>{ user && user.username[0].toUpperCase() }</Avatar>\n                        </Dropdown>\n                    }\n                </Header>\n                <Layout key=\"layout\" style={{ flex: 1 }}>\n                    { isLogged &&\n                        <Sider style={{ backgroundColor: \"#191919\" }}>\n                            <Menu \n                                theme=\"dark\" \n                                style={{ backgroundColor: \"#191919\" }} \n                                mode=\"vertical-left\"\n                                selectedKeys={[window.location.pathname]}\n                            >\n                                <Menu.Item key=\"/calendario\" style={{ display: \"flex\", alignItems: \"center\" }}>\n                                    <Link to=\"/calendario\">Calendario</Link>\n                                    {( this.state.diasPorConfirmar && (user && (user.manager && !this.props.blueCollar))) &&\n                                        <Badge style={{ transform: \"initial\", position: \"static\", marginLeft: 10 }} count={<Icon type=\"bell\" style={{ color: '#f5222d' }} />}></Badge>\n                                    }\n                                </Menu.Item>\n                                <Menu.Item key=\"/archivos\"><Link to=\"/archivos\">Documentos</Link></Menu.Item>\n                                <Menu.Item key=\"/registro\" style={{ display: \"flex\", alignItems: \"center\" }}>\n                                    <Link to=\"/registro\">Registro E/S</Link>\n                                    {( this.state.registrosPorConfirmar && (user && (user.manager && !this.props.blueCollar))) &&\n                                        <Badge style={{ transform: \"initial\", position: \"static\", marginLeft: 10 }} count={<Icon type=\"bell\" style={{ color: '#f5222d' }} />}></Badge>\n                                    }\n                                </Menu.Item>\n                                <Menu.Item key=\"/usuarios\" style={{ alignItems: \"center\" }}>\n                                    <Link to=\"/usuarios\">Usuarios</Link>\n                                    {( this.state.usuariosPorConfirmar && (user && (user.manager && !this.props.blueCollar))) &&\n                                        <Badge style={{ transform: \"initial\", position: \"static\", marginLeft: 10 }} count={<Icon type=\"bell\" style={{ color: '#f5222d' }} />}></Badge>       \n                                    }\n                                </Menu.Item>\n                                <Menu.Item key=\"/grupos\" style={{ alignItems: \"center\", display: (user && (user.manager && !this.props.blueCollar)) ? \"flex\" : \"none\"}}>\n                                    <Link to=\"/grupos\">Grupos</Link>\n                                </Menu.Item>\n                                <Menu.Item key=\"/configuracion\" style={{ alignItems: \"center\", display: (user && (user.manager && !this.props.blueCollar)) ? \"flex\" : \"none\"}}>\n                                    <Link to=\"/configuracion\">Configuración</Link>\n                                </Menu.Item>\n                                {/*\n                                    this.state.local &&\n                                    <Menu.Item key=\"telefonillo\" className=\"telefonillo\" style={{ alignItems: \"center\", display: \"flex\", justifyContent: \"space-between\"  }}>\n                                        <a href=\"http://192.168.1.65:24491\" target=\"_blank\" rel=\"noopener noreferrer\">Telefonillo </a>\n                                        <Button shape=\"circle\" onClick={() => fetch(\"http://192.168.1.65:24491/puerta\")}>\n                                            <Icon style={{ margin: 0 }} type=\"alert\" />\n                                        </Button>\n                                    </Menu.Item>          \n                                */}\n                                <Menu.Item key=\"telefonillo\" className=\"telefonillo\" style={{ alignItems: \"center\", display: \"flex\", justifyContent: \"space-between\"  }}>\n                                    <a href=\"http://192.168.1.65:24491\" target=\"_blank\" rel=\"noopener noreferrer\">Telefonillo </a>\n                                </Menu.Item> \n                            </Menu>\n                        </Sider>\n                    }\n                    <Layout>\n                        <Content style={{ padding: \"2em\", display: \"flex\", flexDirection: \"column\" }}>\n                            <div style={{ flex: 1 }}>\n                                { this.props.children }\n                            </div>\n                            <Footer style={{paddingBottom: 0}}>\n                                <Paragraph>&reg; 2019 - Made with <span role=\"img\" aria-label=\"heart\">❤️</span>, <span role=\"img\" aria-label=\"beer\">🍺</span> and <span role=\"img\" aria-label=\"poo\">💩</span> by <a href=\"https://blacknosaur.com\" target=\"_blank\" rel=\"noopener noreferrer\">Blacknosaur</a> & <a href=\"https://www.alhill.dev\" target=\"_blank\" rel=\"noopener noreferrer\">AlHill Development</a></Paragraph>\n                            </Footer>\n                        </Content>\n                    </Layout>\n                </Layout>\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = state => {\n    return {\n        blueCollar: state.blueCollar,\n        es: state.es,\n        usuarios: state.usuarios,\n        dias: state.dias\n    }\n}\n\nexport default socketConnect(connect(mapStateToProps)(withRouter(Frame)))","import React, { Component } from 'react'\nimport Frame from './Frame'\nimport { Form, Icon, Input, Button, Layout, Card, Row, Col, message } from 'antd';\nimport { saveAuthData, getToken } from './utils/auth';\nimport { connect } from 'react-redux'\nimport { fetchCalendario, fetchUsuarios, fetchES } from './actions'\n\nfunction hasErrors(fieldsError) {\n    return Object.keys(fieldsError).some(field => fieldsError[field]);\n}\n\nclass Login extends Component{\n    constructor(props){\n        super(props)\n        this.state = {\n            error: false\n        }\n    }\n    componentDidMount() {\n        // To disabled submit button at the beginning.\n        this.props.form.validateFields();\n        if(getToken()){ this.props.history.push(\"/\") }\n    }\n    \n    handleSubmit = (e) => {\n        e.preventDefault();\n        this.props.form.validateFields((err, values) => {\n          if (!err) {\n            //console.log('Received values of form: ', values);\n            fetch(process.env.REACT_APP_API_URL + \"/auth/local\", {\n                method: \"POST\",\n                headers: {\n                    \"Accept\": \"application/json\",\n                    \"Content-Type\": \"application/json\",\n                },\n                body: JSON.stringify({ identifier: values.userName, password: values.password })\n            }).then(resp => {\n                resp.json().then(data => {\n                    console.log(data.user)\n                    if(data.statusCode === 400){\n                        this.setState({ error: true })\n                    }\n                    else if(!data.user.confirmed){\n                        message.info(\"Tu acceso al equipo de trabajo todavía no ha sido aprobado\")\n                    }\n                    else{\n                        this.setState({ error: false })\n                        saveAuthData(data);\n                        this.props.dispatch(fetchUsuarios())\n                        this.props.dispatch(fetchCalendario())\n                        this.props.dispatch(fetchES())\n                        this.props.history.push(\"/calendario\")\n                    }\n                }).catch(err => console.log(err))\n            }).catch(err => console.log(err))\n          }\n        });\n    }       \n\n    render(){\n        const { getFieldDecorator, getFieldsError, getFieldError, isFieldTouched } = this.props.form;\n        const userNameError = isFieldTouched('userName') && getFieldError('userName');\n        const passwordError = isFieldTouched('password') && getFieldError('password');\n\n        return (\n            <Layout style={{ height: \"100vh\"}}>\n                <Frame isLogged={ getToken() ? true : false }>\n                    <Layout.Content style={{ display: \"flex\", justifyContent: \"center\", alignItems: \"center\" }}>\n                        <Card style={{ width: 450, maxWidth: \"90%\" }}>\n                            <Form onSubmit={this.handleSubmit}>\n                                <Form.Item\n                                    validateStatus={( userNameError || this.state.error ) ? 'error' : ''}\n                                    help={userNameError || ''}\n                                    >\n                                    { getFieldDecorator('userName', { rules: [{ required: true, message: 'Introduce tu nombre de usuario' }] })(\n                                        <Input \n                                        onChange={e => this.setState({ user: e.target.value })}\n                                        prefix={<Icon type=\"user\" style={{ color: 'rgba(0,0,0,.25)' }} />} \n                                        placeholder=\"Nombre de usuario\" \n                                        />\n                                    )}\n                                </Form.Item>\n                                <Form.Item\n                                    validateStatus={( passwordError || this.state.error ) ? 'error' : ''}\n                                    help={passwordError || ''}\n                                    >\n                                    { getFieldDecorator('password', { rules: [{ required: true, message: 'Introduce tu contraseña' }] })(\n                                        <Input \n                                            onChange={e => this.setState({ pw: e.target.value })} \n                                            prefix={<Icon type=\"lock\" style={{ color: 'rgba(0,0,0,.25)' }} />} \n                                            type=\"password\" \n                                            placeholder=\"Contraseña\" \n                                        />\n                                    )}\n                                </Form.Item>\n                                <Form.Item>\n                                    <Row>\n                                        <Col span={12} style={{ justifyContent: \"center\", display: \"flex\" }}>\n                                            <Button type=\"primary\" onClick={() => this.props.history.push(\"/register\")}>\n                                                Registrarse\n                                            </Button>\n                                        </Col>\n                                        <Col span={12} style={{ justifyContent: \"center\", display: \"flex\" }}>\n                                            <Button\n                                                type=\"primary\"\n                                                htmlType=\"submit\"\n                                                disabled={hasErrors(getFieldsError())}\n                                                >\n                                                Acceder\n                                            </Button>\n                                        </Col>\n                                    </Row>\n                                </Form.Item>\n                            </Form>\n                        </Card>\n                    </Layout.Content>\n                </Frame>\n            </Layout>\n        )\n    }\n}\n\nexport default Form.create({ name: 'login_form' })(connect()(Login))\n\n\n\n","import React, { Component } from 'react'\nimport { Form, Icon, Input, Button, Layout, Card, Row, Col } from 'antd';\nimport { saveAuthData, getHeaders, getToken } from './utils/auth';\nimport Frame from './Frame';\n\nclass Register extends Component{\n    constructor(props){\n        super(props)\n        this.state = {\n            errorUser: false,\n            errorEmail: false,\n            errorPw: false\n        }\n    }\n    componentDidMount() {\n        // To disabled submit button at the beginning.\n        this.props.form.validateFields();\n    }\n\n    validateEmail(email) {\n        const re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n        return re.test(String(email).toLowerCase());\n    }\n    \n    handleSubmit = (e) => {\n        e.preventDefault();\n        this.props.form.validateFields((err, values) => {\n        // console.log('Received values of form: ', values);\n            if (!err) {\n                if( values.password === values.password2 ){\n                    if(this.validateEmail(values.email)){\n                        fetch(process.env.REACT_APP_API_URL + \"/auth/local/register\", {\n                            method: \"POST\",\n                            headers: getHeaders(true),\n                            body: JSON.stringify({ \n                                username: values.userName, password: values.password, email: values.email, confirmed: false \n                            })\n                        }).then(resp => {\n                            resp.json().then(data => {\n                                saveAuthData(data)\n                                this.props.history.push(\"/nuevousuario\")\n                            }).catch(err => console.log(err))\n                        }).catch(err => console.log(err))\n                    }\n                    else{\n                        this.setState({ errorEmail: true })\n                    }\n                }\n                else{\n                    this.setState({ errorPw: true })\n                }\n          }\n        });\n    }       \n\n    render(){\n        const { getFieldDecorator, getFieldError, isFieldTouched } = this.props.form;\n        const userNameError = isFieldTouched('userName') && getFieldError('userName');\n        const emailError = isFieldTouched('email') && getFieldError('email');\n        const passwordError = isFieldTouched('password') && getFieldError('password');\n        const password2Error = isFieldTouched('password2') && getFieldError('password2');\n\n        return (\n            <Layout style={{ height: \"100vh\"}}>\n                <Frame isLogged={ getToken() ? true : false }>\n                    <Layout.Content style={{ display: \"flex\", justifyContent: \"center\", alignItems: \"center\" }}>\n                        <Card style={{ width: 450, maxWidth: \"90%\" }}>\n                            <Form onSubmit={this.handleSubmit}>\n                                <Form.Item\n                                    validateStatus={( userNameError || this.state.errorUser ) ? 'error' : ''}\n                                    help={userNameError || ''}\n                                    >\n                                    { getFieldDecorator('userName', { rules: [{ required: true, message: 'Introduce tu nombre de usuario' }] })(\n                                        <Input \n                                            onChange={e => this.setState({ user: e.target.value })}\n                                            prefix={<Icon type=\"user\" style={{ color: 'rgba(0,0,0,.25)' }} />} \n                                            placeholder=\"Nombre de usuario\" \n                                        />\n                                    )}\n                                </Form.Item>\n                                <Form.Item\n                                    validateStatus={( emailError || this.state.errorEmail ) ? 'error' : ''}\n                                    help={emailError || ''}\n                                    >\n                                    { getFieldDecorator('email', { rules: [{ required: true, message: 'Introduce tu email' }] })(\n                                        <Input \n                                            onChange={e => this.setState({ email: e.target.value })}\n                                            prefix={<Icon type=\"mail\" style={{ color: 'rgba(0,0,0,.25)' }} />} \n                                            type=\"email\"\n                                            placeholder=\"Email\" \n                                        />\n                                    )}\n                                </Form.Item>\n                                <Form.Item\n                                    validateStatus={( passwordError || this.state.errorPw ) ? 'error' : ''}\n                                    help={passwordError || ''}\n                                    >\n                                    { getFieldDecorator('password', { rules: [{ required: true, message: 'Introduce tu contraseña' }] })(\n                                        <Input \n                                            onChange={e => this.setState({ pw: e.target.value })} \n                                            prefix={<Icon type=\"lock\" style={{ color: 'rgba(0,0,0,.25)' }} />} \n                                            type=\"password\" \n                                            placeholder=\"Contraseña\" \n                                        />\n                                    )}\n                                </Form.Item>\n                                <Form.Item\n                                    validateStatus={( password2Error || this.state.errorPw ) ? 'error' : ''}\n                                    help={password2Error || ''}\n                                    >\n                                    { getFieldDecorator('password2', { rules: [{ required: true, message: 'Repite la contraseña' }] })(\n                                        <Input \n                                            onChange={e => this.setState({ pw: e.target.value })} \n                                            prefix={<Icon type=\"lock\" style={{ color: 'rgba(0,0,0,.25)' }} />} \n                                            type=\"password\" \n                                            placeholder=\"Repetir contraseña\" \n                                        />\n                                    )}\n                                </Form.Item>\n                                <Form.Item>\n                                    <Row>\n                                        <Col style={{ justifyContent: \"center\", display: \"flex\" }}>\n                                            <Button type=\"primary\" onClick={this.handleSubmit}>\n                                                Registrarse\n                                            </Button>\n                                        </Col>\n                                    </Row>\n                                </Form.Item>\n                            </Form>\n                        </Card>\n                    </Layout.Content>\n                </Frame>\n            </Layout>\n        )\n    }\n}\n\nexport default Form.create({ name: 'register_form' })(Register)\n\n\n\n","import React from 'react'\nimport Frame from './Frame'\nimport { Typography, Layout, Card } from 'antd'\nimport { getToken } from './utils/auth'\n\nconst FourOhFour = () => (\n    <Layout style={{ height: \"100vh\"}}>\n        <Frame isLogged={ getToken() ? true : false }>\n            <Layout.Content style={{ display: \"flex\", justifyContent: \"center\", alignItems: \"center\" }}>\n                <Card style={{ width: 450, maxWidth: \"90%\" }}>\n                    <Typography.Title style={{ margin: 0, textAlign: \"center\" }}>404!</Typography.Title>\n                </Card>\n            </Layout.Content>\n        </Frame>\n    </Layout>\n)\n\nexport default FourOhFour","import React from 'react';\nimport { Redirect, Route } from 'react-router-dom';\nimport { getUserInfo } from './utils/auth';\n\nexport const PrivateRoute = ({ component: Component, onlyManager = false, ...rest }) => {\n    const userInfo = getUserInfo();\n    return(\n        <Route\n            {...rest}\n            render={props => \n                userInfo && (!onlyManager || ( onlyManager && userInfo.manager )) ? (\n                    <Component {...props} />\n                ) : (\n                    <Redirect\n                        to={{\n                            pathname: \"/login\",\n                            state: { from: props.location }\n                        }}\n                    />\n                )\n            }\n        />\n    )\n}","import React, { Component } from 'react'\nimport { getToken } from './utils/auth';\nimport { Layout } from 'antd'\nimport Frame from './Frame';\n\n\nclass Home extends Component{\n    render(){\n        return(\n            <Layout style={{height:\"100vh\"}}>\n                <Frame isLogged={ getToken() ? true : false }>\n                    <h1>Home</h1>\n                </Frame>\n            </Layout>\n        )\n    }\n}\n\nexport default Home","import React, { Component } from 'react'\nimport { Layout, Typography, Calendar, Modal, message, Avatar, Button, Popover, Radio, Row, Table, Popconfirm, Tag } from 'antd'\nimport moment from 'moment';\nimport { getHeaders, getUserInfo, getToken } from './utils/auth';\nimport request from './utils/request';\nimport Frame from './Frame';\nimport PrivateComponent from './PrivateComponent';\nimport { connect } from 'react-redux'\nimport { fetchCalendario } from './actions';\n\nconst query = getUserInfo() ? `{\n    dias(where: { equipo: \"${getUserInfo().equipo }\" }){\n        _id\n        fecha\n        tipo\n        aprobado\n        user{\n            _id\n            username\n            avatar{\n                url\n            }\n        }\n    }\n}` : \"{}\"\n\nclass Calendario extends Component{\n    state = {\n        modalPedirDia: false,\n        dias: [],\n        diasFilter: [],\n        diasPorAprobar: [],\n        festivos: [],\n        festivosArrUTC: [],\n        sel1: \"libres\",\n        sel2: \"global\"\n    }\n\n    componentDidMount(){\n        \n        const columns = [{\n            title: 'Nombre de usuario',\n            key: 'user',\n            render: r => r.user && r.user.username\n        }, {\n            title: 'Tipo',\n            dataIndex: 'tipo',\n            key: 'tipo'\n        }, {\n            title: 'Fecha',\n            key: 'fecha',\n            render: row => moment(row.fecha).format(\"YYYY-MM-DD\")\n        }, {\n            title: 'Acción',\n            key: 'action',\n            render: (text, record) => (\n              <span>\n                <Popconfirm title={`¿Estás seguro de que deseas aceptar la solicitud de día ${record.tipo} para el día ${moment(record.fecha).format(\"YYYY-MM-DD\")} a ${record.user && record.user.username}?`} onConfirm={evt => this.responderSolicitud(record, true)}>\n                    <Tag color=\"green\" key={`${record._id}_aceptar`}>Aprobar</Tag>\n                </Popconfirm>\n                <Popconfirm title={`¿Estás seguro de que deseas denegar la solicitud de día ${record.tipo} para el día ${moment(record.fecha).format(\"YYYY-MM-DD\")} a ${record.user && record.user.username}?`} onConfirm={evt => this.responderSolicitud(record, false)}>\n                    <Tag color=\"volcano\" key={`${record._id}_denegar`}>Denegar</Tag>\n                </Popconfirm>\n              </span>\n            ),\n        }]\n        this.setState({ columns })\n        if(this.props.dias){\n            this.organizarDias()\n        }\n    }\n\n    componentDidUpdate(prevProps, prevState){\n        if(prevState.sel1 !== this.state.sel1 || prevState.sel2 !== this.state.sel2){\n            this.setState({ diasFilter: this.filtrarDias(this.state.dias) })\n        }\n        else if(prevProps.dias !== this.props.dias){\n            this.organizarDias()\n        }\n    }\n\n    fetchDias = async () => {         \n        await this.props.dispatch(fetchCalendario())\n        this.organizarDias()\n    }\n\n    organizarDias = () => {\n        const { dias } = this.props\n        const festivos = this.props.dias.filter(d => d.tipo === \"festivo\").map(f => ({\n            ...f,\n            fecha: moment.utc(f.fecha).hour(0).minute(0).seconds(0).milliseconds(0).format()\n        }))\n        const festivosArrUTC = festivos.map(f => moment.utc(f.fecha).hour(2).minute(0).seconds(0).milliseconds(0).format())\n        this.setState({ \n            dias, \n            festivos,\n            festivosArrUTC,\n            diasFilter: this.filtrarDias(dias), \n            diasPorAprobar:dias.filter(d => !d.aprobado).map(d => ({...d, key: d._id})) \n        })\n    }\n   \n    filtrarDias = (dias) => {\n        const primerFiltro = this.state.sel1 === \"libres\" ?\n        dias.filter(d => d.tipo === \"libre\") :\n        dias.filter(d => d.tipo === \"remoto\")\n\n        const diasFilter = this.state.sel2 === \"aprobados\" ?  primerFiltro.filter(d => ( d.aprobado && d.user._id === getUserInfo()._id )) : (\n                           this.state.sel2 === \"pendientes\" ? primerFiltro.filter(d => ( !d.aprobado && d.user._id === getUserInfo()._id )) :\n                                                              primerFiltro.filter(d => d.aprobado))\n                                                              \n        return diasFilter\n    }\n\n    responderSolicitud = (dia, bool) => {\n        if(bool){ //Aceptar\n            request(\"/dias/\" + dia._id, {\n                method: \"PUT\",\n                body: { aprobado: true }\n            }).then(resp => {\n                message.success(`Se ha aprobado la solicitud de ${dia.user.username} de día ${dia.tipo} el día ${moment(dia.fecha).format(\"YYYY-MM-DD\")}`)\n                this.fetchDias()\n            }).catch(err => {\n                console.error(err)\n                message.error(`Se ha producido un error durante la aprobación del día ${dia.tipo} solicitado`)                    \n            })\n        }\n        else{ //Denegar\n            request(\"/dias/\" + dia._id, {\n                method: \"DELETE\",\n            }).then(resp => {\n                message.info(\"Se ha denegado la solicitud de día \" + dia.tipo)\n                this.fetchDias()    \n            }).catch(err => {\n                message.error(`Se ha producido un error durante la denegación del día ${dia.tipo} solicitado`)       \n                console.error(err)\n            })\n        }\n    }\n\n    getListData = value => {\n        const listData = this.state.diasFilter\n            .filter(d => moment(d.fecha).format(\"YYYYMMDD\") === moment(value).format(\"YYYYMMDD\"))\n            .map(d => ({\n                user: d.user.username,\n                fecha: moment(d.fecha),\n                avatar: d.user.avatar && (process.env.REACT_APP_API_URL + d.user.avatar.url)\n            }))\n        return listData || [];\n    }\n\n    dateFullCellRender = value => {\n\n        console.log(value)\n        const listData = this.getListData(value);\n        const valueUTC = moment.utc(value.hour(2).minute(0).seconds(0).milliseconds(0)).format()\n        \n        const festivo = this.state.festivos.find(f => { return moment.utc(f.fecha).format() === valueUTC })\n\n        const tc = {\n            title: festivo ? festivo.nombre : value.format(\"LL\"),\n            color: festivo ? \"rgba(255, 40, 30, 0.5)\" : ( [0, 6].includes(value.day()) ? \"rgba(255, 200, 100, 0.5)\" : \"transparent\" )\n        }\n\n        return (\n            <div className=\"ant-fullcalendar-date\" style={{ backgroundColor: tc.color, margin: \"-1px 0\", borderRadius: 3 }} title={tc.title}>\n                <div className=\"ant-fullcalendar-value\">{ value.date() }</div>\n                <div className=\"ant-fullcalendar-content\">\n                    <ul className=\"events\">\n                    {\n                        listData.map(item => (\n                            <Popover key={item.user + item.fecha} content={<span>{item.user}</span>}>\n                                <Avatar src={item.avatar ? item.avatar : null}>{ item.user[0].toUpperCase() }</Avatar>\n                            </Popover>\n                        ))\n                    }\n                    </ul>\n                </div>\n            </div>\n        );\n    }\n\n    solicitarDia = (fecha, tipo) => {\n        const { _id, equipo } = getUserInfo()\n        console.log(getUserInfo())\n        console.log(tipo)\n        fetch(process.env.REACT_APP_API_URL + \"/dias\", {\n            method: \"POST\",\n            headers: getHeaders(),\n            body: JSON.stringify({\n                fecha, tipo, user: _id, equipo\n            })\n        }).then(resp => {\n            resp.json().then(dia => {\n                console.log(dia)\n                message.info(`Has solicitado como día ${tipo} el ${moment(this.state.dia).format(\"DD/MM/YYYY\")}. Tu solicitud está pendiente de aprobación`); \n                this.fetchDias()\n                this.setState({ modalPedirDia: false, dias: [...this.state.dias, dia] })\n            }).catch(err => console.log(err))\n        }).catch(err => console.log(err))\n    }\n\n    lanzarModalDia = dia => {\n        const misDias = this.state.dias.filter(d => d.user && (d.user._id === getUserInfo()._id ))\n        if( moment().isSameOrBefore(dia, \"day\") ){\n            if( this.state.festivos.find(f => moment(f.fecha).isSame(dia, \"day\")) === undefined ){\n                const pedido = misDias.find(d => moment(d.fecha).isSame(dia, \"day\"))\n                if(!pedido){\n                    this.setState({\n                        dia,\n                        modalPedirDia: true\n                    })\n                }\n                else{ \n                    if(!pedido.aprobado){\n                        message.warning(\"La solicitud de ese día todavía se encuentra pendiente de aprobación\") \n                    }\n                }\n            }\n            else{ message.warning(\"No puedes solicitar un día festivo\") }\n        }\n        else{ message.warning(\"No puedes solicitar un día pasado\") }\n    }\n\n    render(){\n        return(\n            <Layout style={{height:\"100vh\"}}>\n                <Frame isLogged={ getToken() ? true : false }>\n                    <Row style={{ justifyContent: \"space-around\", display: \"flex\"}}>\n                        <Radio.Group defaultValue={this.state.sel1} buttonStyle=\"solid\">\n                            <Radio.Button onClick={() => this.setState({ sel1: \"libres\" }) } value=\"libres\">Libres</Radio.Button>\n                            <Radio.Button onClick={() => this.setState({ sel1: \"remotos\" }) } value=\"remotos\">Remotos</Radio.Button>\n                        </Radio.Group>\n                        <Radio.Group defaultValue={this.state.sel2} buttonStyle=\"solid\">\n                            <Radio.Button onClick={() => this.setState({ sel2: \"global\" }) } value=\"global\">Global aprobados</Radio.Button>\n                            <Radio.Button onClick={() => this.setState({ sel2: \"aprobados\" }) } value=\"aprobados\">Mis días aprobados</Radio.Button>\n                            <Radio.Button onClick={() => this.setState({ sel2: \"pendientes\" }) } value=\"pendientes\">Mis días pendientes de aprobación</Radio.Button>\n                        </Radio.Group>\n                    </Row>\n                    <Calendar\n                        onSelect={evt => this.lanzarModalDia(evt)} \n                        dateFullCellRender={this.dateFullCellRender}\n                        style={{ margin: \"-1px 0\"}}\n                    />\n                    <PrivateComponent>\n                        <h1>Días pendientes de revisión</h1>\n                        <Table dataSource={this.state.diasPorAprobar} columns={this.state.columns || []} />\n                    </PrivateComponent>\n                </Frame>\n                <Modal\n                    visible={this.state.modalPedirDia}\n                    onCancel={() => this.setState({ modalPedirDia: false })}\n                    footer={[\n                        <Button key=\"libre\" onClick={() => this.solicitarDia( this.state.dia, \"libre\")}>Día libre</Button>,\n                        <Button key=\"remoto\" type=\"primary\" onClick={() => this.solicitarDia( this.state.dia, \"remoto\")}>Día remoto</Button>\n                      ]}\n                >\n                    <p>Solicitar el día { moment(this.state.dia).format(\"DD/MM/YYYY\") } como... </p>\n                </Modal>\n            </Layout>\n        )\n    }\n}\n\nconst mapStateToProps = state => {\n    return {\n        dias: state.dias\n    }\n}\n\nexport default connect(mapStateToProps)(Calendario)","import React, { Component } from 'react'\nimport { Form, Icon, Input, Button, Layout, Card, Row, Col, message } from 'antd';\nimport { getHeaders, getUserInfo, getToken } from './utils/auth';\nimport { Typography } from 'antd';\nimport gql from './utils/gql';\nimport Frame from './Frame';\n\nconst { Title } = Typography;\n\nconst query = `{\n    equipos(where: {nombre: \"$nombre$\"}){\n        _id\n    }\n}`\nclass NuevoUsuario extends Component{\n    constructor(props){\n        super(props)\n        this.state = {\n            errorUser: false,\n            errorEmail: false,\n            errorPw: false\n        }\n    }\n    // componentDidMount() {\n    //     // To disabled submit button at the beginning.\n    //     this.props.form.validateFields();\n    // }\n    \n    solicitarAcceso = e => {\n        e.preventDefault()\n        this.props.form.validateFields((err, values) => {\n            fetch(process.env.REACT_APP_API_URL + gql(query, { nombre: values.unirse }), { headers: getHeaders() })\n                .then(response => {\n                    console.log(response)\n                    response.json().then(data => {\n                        console.log(data)\n                        if(data.data.equipos[0]){\n                            fetch(process.env.REACT_APP_API_URL + \"/users/\" + getUserInfo()._id, {\n                                method: \"PUT\",\n                                headers: getHeaders(),\n                                body: JSON.stringify({\n                                    equipo: data.data.equipos[0]._id,\n                                    confirmed: false\n                                })\n                            }).then(data => {\n                                console.log(data)\n                                if(data.ok){\n                                    message.info(`Se ha solicitado con éxito el acceso al equipo \"${values.unirse}\"`)\n                                }\n                            })\n                        }\n                        else{\n                            message.error(`No se ha encontrado ningún equipo \"${values.unirse}\"`); \n                        }\n                    }).catch(err => console.log(err))\n                }).catch(err => console.log(err))\n        })\n    }\n\n    crearEquipo = e => {\n        e.preventDefault()\n        this.props.form.validateFields((err, values) => {\n            fetch(process.env.REACT_APP_API_URL + \"/equipos\", {\n                method: \"POST\",\n                headers: getHeaders(),\n                body: JSON.stringify({\n                    nombre: values.crear,\n                    users: [getUserInfo()._id]\n                })\n            }).then(response => {\n                response.json().then(data => {\n                    fetch(process.env.REACT_APP_API_URL + \"/users/\" + getUserInfo()._id, {\n                        method: \"PUT\",\n                        headers: getHeaders(),\n                        body: JSON.stringify({\n                            confirmed: true,\n                            manager: true\n                        })\n                    }).then(() => {\n                        this.props.history.push(\"/\")\n                    })\n                }).catch(err => { console.log(err); message.error(\"Se ha producido un error al asignar el usuario al equipo recien creado\") })\n            }).catch(err => { console.log(err); message.error(\"Se ha producido un error al crear el equipo\") })\n        })\n    }   \n\n    render(){\n        const { getFieldDecorator, getFieldError, isFieldTouched } = this.props.form;\n        const unirseError = isFieldTouched('unirse') && getFieldError('unirse');\n        const crearError = isFieldTouched('crear') && getFieldError('crear');\n\n        return (\n            <Layout style={{ height: \"100vh\"}}>\n                <Frame isLogged={ getToken() ? true : false }>\n                    <Layout.Content style={{ display: \"flex\", flexDirection: \"column\", justifyContent: \"center\", alignItems: \"center\" }}>\n                        <Form onSubmit={this.handleSubmit}>\n                            <Card style={{ width: 450, maxWidth: \"90%\", marginBottom: \"1em\" }}>\n                                <Title level={2}>Unirse a un equipo</Title>\n                                <Form.Item\n                                    validateStatus={( unirseError || this.state.errorUnirse ) ? 'error' : ''}\n                                    help={unirseError || ''}\n                                    >\n                                    { getFieldDecorator('unirse', { rules: [{ required: true, message: 'Introduce el nombre del equipo' }] })(\n                                        <Input \n                                            onChange={e => this.setState({ pw: e.target.value })} \n                                            prefix={<Icon type=\"team\" style={{ color: 'rgba(0,0,0,.25)' }} />} \n                                            type=\"text\" \n                                            placeholder=\"Nombre del equipo al que te quieres unir\" \n                                        />\n                                    )}\n                                </Form.Item>\n                                <Form.Item>\n                                    <Row>\n                                        <Col style={{ justifyContent: \"center\", display: \"flex\" }}>\n                                            <Button type=\"primary\" onClick={this.solicitarAcceso}>\n                                                Solicitar acceso\n                                            </Button>\n                                        </Col>\n                                    </Row>\n                                </Form.Item>\n                            </Card>\n                            <Card style={{ width: 450, maxWidth: \"90%\" }}>\n                                <Title level={2}>Crear un equipo</Title>\n                                <Form.Item\n                                    validateStatus={( crearError || this.state.errorCrear ) ? 'error' : ''}\n                                    help={crearError || ''}\n                                    >\n                                    { getFieldDecorator('crear', { rules: [{ required: true, message: 'Introduce el nombre del equipo' }] })(\n                                        <Input \n                                            onChange={e => this.setState({ pw: e.target.value })} \n                                            prefix={<Icon type=\"usergroup-add\" style={{ color: 'rgba(0,0,0,.25)' }} />} \n                                            type=\"password\" \n                                            placeholder=\"Nombre del equipo a crear\" \n                                        />\n                                    )}\n                                </Form.Item>\n                                <Form.Item>\n                                    <Row>\n                                        <Col style={{ justifyContent: \"center\", display: \"flex\" }}>\n                                            <Button type=\"primary\" onClick={this.crearEquipo}>\n                                                Crear equipo\n                                            </Button>\n                                        </Col>\n                                    </Row>\n                                </Form.Item>\n                            </Card>\n                        </Form>\n                    </Layout.Content>\n                </Frame>\n            </Layout>\n        )\n    }\n}\n\nexport default Form.create({ name: 'nuevousuario_form' })(NuevoUsuario)\n\n\n\n","import React, { Component } from 'react'\nimport { Layout, Upload, Icon, message, Table, Button, Select, Tag, Popconfirm, Checkbox, Collapse } from 'antd'\nimport Frame from './Frame';\nimport { getUserInfo, getToken } from './utils/auth';\nimport gql from './utils/gql';\nimport { connect } from 'react-redux'\nimport { fetchDocumentos } from './actions'\nimport request from './utils/request';\n\nconst query = `{\nuser(id:\"$userId$\"){\n    documentos{\n        _id\n    }\n}}`  \n\nclass Documentos extends Component{\n\n    state = {\n        fileList: [],\n        asociarA: [],\n        userInfo: getUserInfo(),\n        selectedUser: {documentos: []},\n        disponibleParaTodos: true,\n        columns: [{\n            title: 'Nombre de usuario',\n            dataIndex: 'username',\n            key: 'username',\n        }, {\n            title: 'Email',\n            dataIndex: 'email',\n            key: 'email',\n        }],\n        misArchColumns: [{\n            title: 'Nombre de archivo',\n            dataIndex: 'name',\n            key: 'name',\n        }, {\n            key: \"archivo\",\n            render: file => (\n                <div key={file._id} style={{ display: \"flex\", justifyContent: \"flex-end\" }}>\n                    <a href={process.env.REACT_APP_API_URL + file.url} target=\"_blank\" rel=\"noopener noreferrer\">\n                        <Tag color=\"geekblue\" key={`${file._id}_file`}><Icon type=\"file-text\" /> Enlace</Tag>\n                    </a>\n                    <Popconfirm \n                        title={`¿Estás seguro de que deseas desvincular ${file.name} de ${this.state.selectedUser.username}?`} \n                        onConfirm={() => this.desvincularArchivo(file, this.state.selectedUser)}>\n                        <Tag color=\"orange\" key={`${file._id}_file`}><Icon type=\"disconnect\" /> Desvincular</Tag>\n                    </Popconfirm>\n                    <Popconfirm \n                        title={`¿Estás seguro de que deseas borrar ${file.name}? Esto borrará el archivo para todos los usuarios`} \n                        onConfirm={() => this.borrarArchivo(file)}\n                        icon={<Icon type=\"warning\" style={{ color: 'red' }} />}\n                    >\n                        <Tag color=\"volcano\" key={`${file._id}_file`}><Icon type=\"delete\" /> Borrar</Tag>\n                    </Popconfirm>\n                </div>\n            )\n        }],\n        archGlobColumns: [{\n            title: 'Nombre de archivo',\n            dataIndex: 'name',\n            key: 'name',\n        }, {\n            key: \"archivo\",\n            render: file => (\n                <div key={file._id} style={{ display: \"flex\", justifyContent: \"flex-end\" }}>\n                    <a href={process.env.REACT_APP_API_URL + file.url} target=\"_blank\" rel=\"noopener noreferrer\">\n                        <Tag color=\"geekblue\" key={`${file._id}_file`}><Icon type=\"file-text\" /> Enlace</Tag>\n                    </a>\n                    <Popconfirm \n                        title={`¿Estás seguro de que deseas borrar ${file.name}? Esto borrará el archivo para todos los usuarios`} \n                        onConfirm={() => this.borrarArchivo(file)}\n                        icon={<Icon type=\"warning\" style={{ color: 'red' }} />}\n                    >\n                        <Tag color=\"volcano\" key={`${file._id}_file`}><Icon type=\"delete\" /> Borrar</Tag>\n                    </Popconfirm>\n                </div>\n            )\n        }],\n        archUserColumns: [{\n            title: 'Nombre de archivo',\n            dataIndex: 'name',\n            key: 'name',\n        }, {\n            key: \"archivo\",\n            render: file => (\n                <div key={file._id} style={{ display: \"flex\", justifyContent: \"flex-end\" }}>\n                    <a href={process.env.REACT_APP_API_URL + file.url} target=\"_blank\" rel=\"noopener noreferrer\">\n                        <Tag color=\"geekblue\" key={`${file._id}_file`}><Icon type=\"file-text\" /> Enlace</Tag>\n                    </a>\n                </div>\n            )\n        }]\n    }\n\n    componentDidMount(){\n        this.setState({ selectedUser: this.props.usuarios.find(u => u.username === getUserInfo().username) })\n    }\n\n    componentDidUpdate(prevProps){\n        if(prevProps.usuarios !== this.props.usuarios){\n            this.setState({ selectedUser: this.props.usuarios.find(u => u.username === getUserInfo().username) })\n        }\n    }\n\n    rowSelection = {\n        onChange: (selectedRowKeys, selectedRows) => {\n            this.setState({ asociarA: selectedRows.map(u => u._id) })\n        },\n        getCheckboxProps: record => ({\n            disabled: record.name === 'Disabled User', // Column configuration not to be checked\n            name: record.name,\n        }),\n    };\n\n    desvincularArchivo = async (file, user) => {\n        const docId = this.state.selectedUser.documentos.find(d => d.archivo._id === file._id)._id\n        const documento = await request(\"/documentos/\" + docId)\n        const users = documento.users.filter(u => u._id !== user._id)\n        request(\"/documentos/\" + docId, {\n            method: \"PUT\",\n            body: { users }\n        }).then(data => {\n            message.info(\"El archivo se desvinculó correctamente\")\n            this.props.dispatch(fetchDocumentos())\n        }).catch(err => {\n            console.log(err)\n            message.error(\"Se produjo un error durante la desvinculación del documento\")\n        })\n    }\n\n    borrarArchivo = async file => {\n        const docId = this.props.documentos.find(d => d.archivo._id === file._id)._id\n        request(\"/upload/files/\" + file._id, {\n            method: \"DELETE\"\n        }).then(data => {\n            request(\"/documentos/\" + docId, {\n                method: \"DELETE\"\n            }).then(data => {\n                message.info(\"El archivo se borró correctamente\")\n                this.props.dispatch(fetchDocumentos())\n            }).catch(err => {\n                console.log(err)\n                message.error(\"Se produjo un error durante el borrado del documento\")\n            })\n        })\n          .catch(err => {\n            console.log(err)\n            message.error(\"Se produjo un error durante el borrado del documento\")\n        })\n    }\n\n    handleUpload = async () => {\n        try{\n            const promisingPromises = this.state.fileList.map(async file => {\n                console.log()\n                const doc = await request(\"/documentos\", { method: \"POST\", body: { global: this.state.disponibleParaTodos } })\n                const body = new FormData();\n                body.append(\"ref\", \"documento\");\n                body.append(\"refId\", doc._id);\n                body.append(\"field\", \"archivo\");\n                body.append(\"files\", file);\n                request(\"/upload\", {\n                    method: \"POST\",\n                    headers: {\"Authorization\": \"Bearer \" + getToken()},\n                    body\n                }, false)\n                return doc._id\n            })\n            const arrayArchivos = await Promise.all(promisingPromises)\n            console.log(arrayArchivos)\n            if(this.state.asociarA.length === 0 && !this.state.disponibleParaTodos){\n                message.error(\"El documento no está asociado a ningún usuario\")\n            }\n            else if(!this.state.disponibleParaTodos){\n                const promesitas = this.state.asociarA.map(async userId => {\n                    const antDocus = (await request(gql(query, { userId }))).data.user.documentos\n                    return request(\"/users/\" + userId, {\n                        method: \"PUT\",\n                        body: {\n                            documentos: [...antDocus, ...arrayArchivos]\n                        }\n                    })\n                })\n                Promise.all(promesitas).then(() => {\n                    message.info(\"Los documentos se han subido correctamente\")\n                    this.props.dispatch(fetchDocumentos())\n                    this.setState({\n                        mostrarListaUsuarios: false,\n                        fileList: []\n                    })\n                })\n            }\n            else{\n                message.info(\"Los documentos se han subido correctamente\")\n                this.props.dispatch(fetchDocumentos())\n                this.setState({\n                    mostrarListaUsuarios: false,\n                    fileList: []\n                })\n            }\n        }\n        catch(err){\n            console.log(err)\n            message.error(\"Ocurrió un error durante la subida de documentos\")\n        }\n    }\n\n    render(){\n        return(\n            <Layout style={{height:\"100vh\"}}>\n                <Frame isLogged={ getToken() ? true : false }>\n                    <h1>Documentos</h1>\n                    {(this.state.userInfo.manager && !this.props.blueCollar ) && [ \n                        <div key=\"sa\" style={{ marginBottom: 50 }}>\n                            <h2>Subir archivo</h2>\n                            <div style={{ width: \"320px\", marginBottom: 20 }}>\n                                <Upload.Dragger \n                                    name='file'\n                                    action={ process.env.REACT_APP_API_URL + '/upload' }\n                                    multiple={true}\n                                    onChange={(info) => {\n                                        const status = info.file.status;\n                                        if (status !== 'uploading') {\n                                            //console.log(info.file, info.fileList);\n                                            if(info.fileList.length === 0){\n                                                this.setState({ mostrarListaUsuarios: false })\n                                            }\n                                        }\n                                        if (status === 'done') {\n                                            message.success(`${info.file.name} se ha subido correctamente.`);\n                                        } else if (status === 'error') {\n                                            message.error(`La subida de ${info.file.name} falló.`);\n                                        }\n                                    }} \n                                    beforeUpload={(file, fileList) => {\n                                        this.setState({ \n                                            fileList,\n                                            mostrarListaUsuarios: true \n                                        })\n                                        return false\n                                    }}\n                                    fileList={this.state.fileList}\n                                    onRemove={file => {\n                                        const fileList = this.state.fileList.filter(f => f.uid !== file.uid)\n                                        this.setState({ fileList, mostrarListaUsuarios: fileList.length > 0 ? true : false })\n                                    }}\n                                >\n                                    <Icon type=\"inbox\" />\n                                    <p>Arrastra documentos aquí</p>\n                                </Upload.Dragger>\n                            </div>\n                            { this.state.mostrarListaUsuarios &&\n                                <div style={{ display: \"flex\", flexDirection: \"column\"}}>\n                                    <Checkbox style={{ marginBottom: 20 }} checked={this.state.disponibleParaTodos} onChange={e => this.setState({ disponibleParaTodos: e.target.checked })}>Disponible para todos los usuarios</Checkbox>\n                                    <Collapse className=\"sinCabecera\" bordered={false} activeKey={ this.state.disponibleParaTodos ? \"0\" : \"1\"}>\n                                        <Collapse.Panel key=\"1\">\n                                            <h3 key=\"asociarTitle\">Asociar archivo a:</h3>\n                                            <Table key=\"asociarTabla\" rowSelection={this.rowSelection} dataSource={this.props.usuarios} columns={this.state.columns} />\n                                        </Collapse.Panel>\n                                    </Collapse>\n                                    <div>\n                                        <Button onClick={this.handleUpload}>Subir documentos</Button>\n                                    </div>\n                                </div>\n                            }\n                        </div>,\n                        <div key=\"apu\">\n                            <h2>Archivos por usuario</h2>\n                            <Select\n                                showSearch\n                                style={{ width: 200, marginBottom: 20 }}\n                                placeholder=\"Selecciona un usuario\"\n                                defaultValue={getUserInfo().username}\n                                optionFilterProp=\"children\"\n                                onChange={op => {\n                                    const selectedUser = this.props.usuarios.find(u => u.username === op)\n                                    this.setState({ selectedUser })\n\n                                }}\n                                filterOption={(input, option) => option.props.children.toLowerCase().indexOf(input.toLowerCase()) >= 0}\n                            >\n                                { this.props.usuarios.map(u => \n                                    <Select.Option value={u.username} key={u._id}>{u.username}</Select.Option>\n                                )}\n                            </Select>\n                            {\n                                this.state.selectedUser && \n                                    <Table \n                                        // dataSource={this.state.selectedUser.documentos.map(d => d.archivo)} \n                                        dataSource={this.props.documentos.filter(d => d.users.map(u => u._id).includes(this.state.selectedUser._id)).map(d => d.archivo)} \n                                        columns={this.state.misArchColumns}\n                                        rowKey=\"_id\"\n                                    ></Table>\n                            }\n\n                            <h2 style={{ marginTop: 20 }}>Archivos globales</h2>\n                            <Table \n                                dataSource={this.props.documentos.filter(d => d.global).map(d => d.archivo)} \n                                columns={this.state.archGlobColumns}\n                                rowKey=\"_id\"\n                            ></Table>\n                        </div>\n                    ]}\n                    { (!this.state.userInfo.manager || this.props.blueCollar ) &&\n                        <div>\n                            <h2>Mis archivos</h2>\n                            <Table \n                                dataSource={this.props.documentos.filter(d => this.state.userInfo.documentos.includes(d._id) || d.global).map(d => d.archivo)} \n                                columns={this.state.archUserColumns}\n                                rowKey=\"_id\"\n                            ></Table>\n                        </div>\n                    }\n                </Frame>\n            </Layout>\n        )\n    }\n}\n\nconst mapStateToProps = state => {\n    return {\n        usuarios: state.usuarios,\n        documentos: state.documentos,\n        blueCollar: state.blueCollar\n    }\n}\n\nexport default connect(mapStateToProps)(Documentos)","import React, { Component } from 'react'\nimport { Layout, Table, Tag, Popconfirm, message, Icon, Button, Modal } from 'antd'\nimport Frame from './Frame';\nimport { socketConnect } from 'socket.io-react';\nimport { connect } from 'react-redux'\nimport { Link } from 'react-router-dom'\nimport { fetchUsuarios } from './actions'\nimport request from './utils/request';\nimport { getToken, getUserInfo } from './utils/auth';\n\n\nclass Usuarios extends Component{\n\n    state = {\n        columns: [],\n        extraColumnsA: [],\n        extraColumnsA2: [],\n        extraColumnsB: []\n    }\n\n    componentDidMount() {\n\n        const columns = [{\n            title: 'Nombre de usuario',\n            dataIndex: 'username',\n            key: 'username',\n        }, {\n            title: 'Email',\n            dataIndex: 'email',\n            key: 'email',\n        }]\n\n        const extraColumnsA = getUserInfo.manager ? [{\n            title: 'Manager',\n            dataIndex: 'manager',\n            render: bool => bool ? <Icon type=\"check-circle\" theme=\"twoTone\" twoToneColor=\"#eb2f96\" twoToneColor=\"#52c41a\"/> : <Icon type=\"close-circle\" theme=\"twoTone\" twoToneColor=\"#eb2f96\"/>\n        }, {\n            title: 'ID Tarjeta',\n            key: 'idcard',\n            render: (text, record) => {\n                return record.idcard ? \n                    <div>\n                        <span>{record.idcard}&nbsp;&nbsp;</span>\n                        <Popconfirm title={`¿Estás seguro de que deseas desasociar la tarjeta de ${record.email}?`} onConfirm={evt => this.desasociarTarjeta(record)}>\n                            <Tag color=\"volcano\" key={`${record._id}_denegar`}><Icon type=\"delete\" /></Tag>\n                        </Popconfirm>\n                    </div>\n                    : <Button type=\"primary\" onClick={() => this.setState({ modalAsociar: true, usuarioAsociar: record._id })}>Asociar tarjeta</Button>\n            }\n        }] : []\n        \n        const extraColumnsA2 = [{\n            key: 'btn',\n            render: (text, record) => (\n                <Link to={\"/usuario/\" + record._id}>\n                    <Tag key={`${record._id}_denegar`}><Icon type=\"user\" /> Editar</Tag>\n                </Link>\n            )\n        }]\n\n        const extraColumnsB = [{\n            title: 'Acción',\n            key: 'action',\n            render: (text, record) => (\n              <span>\n                <Popconfirm title={`¿Estás seguro de que deseas aceptar en ${record.equipo && record.equipo.nombre} a ${record.email}?`} onConfirm={evt => this.responderSolicitud(record, true)}>\n                    <Tag color=\"green\" key={`${record._id}_aceptar`}>Aceptar</Tag>\n                </Popconfirm>\n                <Popconfirm title={`¿Estás seguro de que deseas denegar la solicitud de ${record.email} para entrar en ${record.equipo && record.equipo.nombre}?`} onConfirm={evt => this.responderSolicitud(record, false)}>\n                    <Tag color=\"volcano\" key={`${record._id}_denegar`}>Denegar</Tag>\n                </Popconfirm>\n              </span>\n            ),\n        }]\n        this.setState({ columns, extraColumnsA, extraColumnsA2, extraColumnsB })\n        if(this.props.usuarios){\n            this.filtraUsuarios(this.props.usuarios) \n        }\n    }\n\n    componentDidUpdate(prevProps, prevState){\n        if(prevProps.usuarios !== this.props.usuarios){\n            this.filtraUsuarios(this.props.usuarios)\n        }\n        else if(prevState.modalAsociar !== this.state.modalAsociar){\n            if( this.state.modalAsociar ){\n                this.props.socket.on('notification', msg => {\n                    console.log(msg)\n                    if(!this.props.usuarios.map(u => u.idcard).includes(msg.es)){\n                        request(\"/users/\" + this.state.usuarioAsociar, {\n                            method: \"PUT\",\n                            body: {\n                                idcard: msg.es && msg.es.idcard\n                            }\n                        }).then(data => {\n                            message.info(\"La tarjeta ha sido asociada correctamente\")\n                            this.fetchUsers()\n                            this.setState({ modalAsociar: false, usuarioAsociar: undefined })\n                        }).catch(err => {\n                            message.error(\"Se produjo un error durante el proceso de asociación de la tarjeta\")\n                            console.log(err)\n                            this.setState({ modalAsociar: false, usuarioAsociar: undefined })\n                        })\n                    }\n                    else{\n                        message.error(\"Esa tarjeta ya está asociada a un usuario. Desasociela antes de reasignarla.\")\n                    }\n                })\n            }\n            else{\n                this.props.socket.off('notification')\n            }\n        }\n    }\n\n    filtraUsuarios = usuarios => {\n        const activos = this.props.usuarios.filter(u => u.confirmed).map(u => ({...u, key: u._id}))\n        const pendientes = this.props.usuarios.filter(u => !u.confirmed).map(u => ({...u, key: u._id}))\n        this.setState({ activos, pendientes })\n    }\n\n    fetchUsers = async () => {\n        await this.props.dispatch(fetchUsuarios())\n        this.filtraUsuarios(this.props.usuarios)\n    }\n\n    responderSolicitud = (usuario, bool) => {\n        if(bool){ //Aceptar\n            request(\"/users/\" + usuario._id, {\n                method: \"PUT\",\n                body: { confirmed: true }\n            }).then(resp => {\n                message.success(`¡${usuario.email} ahora forma parte del equipo ${usuario.equipo.nombre}!`)\n                this.fetchUsers()\n            }).catch(err => {\n                console.error(err)\n                message.error(\"Se ha producido un error durante la confirmación de la solicitud del usuario\")                    \n            })\n        }\n        else{ //Denegar\n            request(\"/users/\" + usuario._id, {\n                method: \"DELETE\",\n            }).then(resp => {\n                message.info(\"La solicitud se ha denegado correctamente\")\n                this.fetchUsers()               \n            }).catch(err => {\n                message.error(\"Se ha producido un error durante la denegación de la solicitud del usuario\")       \n                console.error(err)\n            })\n        }\n    }\n\n    desasociarTarjeta = usuario => {\n        console.log(usuario)\n        request(\"/users/\" + usuario._id, {\n            method: \"PUT\",\n            body: {\n                idcard: \"\"\n            }\n        }).then(() => this.fetchUsers())\n    }\n    \n    render(){\n        const { activos, pendientes, columns, extraColumnsA, extraColumnsA2, extraColumnsB } = this.state\n        //console.log(columns)\n        return(\n            <Layout style={{height:\"100vh\"}}>\n                <Frame isLogged={ getToken() ? true : false }>\n                    <h1>Usuarios activos</h1>\n                    <Table dataSource={activos} columns={[...columns, ...extraColumnsA, ...extraColumnsA2 ]} />\n                    {\n                        getUserInfo.manager && [\n                            <h1 key=\"pendAprobTitle\">Usuarios pendientes de aprobación</h1>,\n                            <Table key=\"pendAprobTable\" dataSource={pendientes} columns={[...columns, ...extraColumnsB]} />\n                        ]\n                    }\n                </Frame>\n                <Modal\n                    visible={this.state.modalAsociar}\n                    onOk={e => e}\n                    onCancel={() => this.setState({ modalAsociar: false, usuarioAsociar: undefined })}\n                    footer={[\n                        <Button key=\"back\" type=\"primary\" onClick={() => this.setState({ modalAsociar: false, usuarioAsociar: undefined })}>Cancelar</Button>,\n                    ]}\n                >\n                    <p>Acerca la tarjeta al lector sin cerrar esta ventana para asociarla al usuario</p>\n                </Modal>\n            </Layout>\n        )\n    }\n}\n\nconst mapStateToProps = state => {\n    return {\n        usuarios: state.usuarios\n    }\n}\n\nexport default socketConnect(connect(mapStateToProps)(Usuarios))","import React, { Component } from 'react'\nimport { getToken, getUserInfo } from './utils/auth';\nimport { Layout, Input, Form, Radio, Button, message } from 'antd'\nimport { connect } from 'react-redux'\nimport request from './utils/request'\nimport Frame from './Frame';\nimport { fetchUsuarios, fetchES } from './actions'\n\n\nclass EditUsuario extends Component{\n\n    state = {\n        usuario: {},\n        duracionjornada: \"\",\n        frasesStr: \"\",\n        frases: [],\n        frasePr: \"\",\n        frasePrAct: false,\n        manager: undefined\n    }\n\n    componentDidMount(){\n        if(this.props.usuarios.length > 0){\n            const usuario = this.props.usuarios.find(u => u._id === this.props.match.params.id) \n            console.log(usuario)\n            this.setState({ \n                duracionjornada: usuario.duracionjornada,\n                frasesStr: usuario.frases.reduce((a, b) => a + b + \"\\n\", \"\"),\n                frases: usuario.frases,\n                frasePr: usuario.frasePrioritaria,\n                frasePrAct: usuario.actFrasePrioritaria,\n                manager: usuario.manager,\n                usuario\n            })\n        }\n    }\n\n    componentDidUpdate(prevProps, prevState){\n        if(this.props.usuarios && this.props.usuarios !== prevProps.usuarios){\n            const usuario = this.props.usuarios.find(u => u._id === this.props.match.params.id) \n            console.log(usuario)\n            this.setState({ \n                duracionjornada: usuario.duracionjornada,\n                frasesStr: usuario.frases.reduce((a, b) => a + b + \"\\n\", \"\"),\n                frases: usuario.frases,\n                frasePr: usuario.frasePrioritaria,\n                frasePrAct: usuario.actFrasePrioritaria,\n                manager: usuario.manager,\n                usuario\n            })\n        }\n        else if( this.state.frasesStr !== prevState.frasesStr ){\n            this.setState({ frases: this.state.frasesStr.split(/\\n/gm) })\n        }\n    }\n\n    guardarDatos = () => {\n        if(this.state.duracionjornada > 0 && this.state.duracionjornada < 24){\n            request(\"/users/\" + this.state.usuario._id, {\n                method: \"PUT\",\n                body: {\n                    frases: this.state.frases.filter(f => ![undefined, null, \"\"].includes(f)),\n                    frasePrioritaria: this.state.frasePr,\n                    actFrasePrioritaria: this.state.frasePrAct,\n                    manager: this.state.manager,\n                    duracionjornada: this.state.duracionjornada\n                }\n            }).then(data => {\n                //console.log(data)\n                message.success(\"Los cambios se guardaron correctamente\")\n                this.props.dispatch(fetchES())\n                this.props.dispatch(fetchUsuarios())\n            }).catch(err => {\n                console.log(err)\n                message.error(\"Se produjo un error durante el guardado\")\n            })\n        }\n        else{\n            message.error(\"La duración media de la jornada ha de estar entre 0 y 24\")\n        }\n    }\n\n    render(){\n        const { usuario } = this.state\n        return(\n            <Layout style={{height:\"100vh\"}}>\n                <Frame isLogged={ getToken() ? true : false }>\n                    <h1>{ usuario.username }</h1>\n                    { getUserInfo.manager && [\n                        <Form.Item key=\"editUserJornada\" label=\"Duración media de su jornada laboral\">\n                            <Input type=\"number\" value={this.state.duracionjornada} onChange={e => this.setState({ duracionjornada: e.target.value })} />\n                        </Form.Item>,\n                        <Form.Item key=\"editUserManager\" label=\"Manager\">\n                            <Radio.Group  value={ this.state.manager }>\n                                <Radio.Button value={true} onClick={() => this.setState({ manager: true })}>Sí</Radio.Button>\n                                <Radio.Button value={false} onClick={() => this.setState({ manager: false })}>No</Radio.Button>\n                            </Radio.Group>\n                        </Form.Item>\n                    ]}\n                    <Form.Item label=\"Frases (una por línea)\">\n                        <Input.TextArea rows={6} value={this.state.frasesStr} onChange={e => this.setState({ frasesStr: e.target.value })} />\n                    </Form.Item>\n                    <Form.Item label=\"Frase prioritaria\">\n                        <Input type=\"text\" value={this.state.frasePr} onChange={e => this.setState({ frasePr: e.target.value })}/>\n                        <Radio.Group value={ this.state.frasePrAct }>\n                            <Radio.Button value={true} onClick={() => this.setState({ frasePrAct: true })}>Activada</Radio.Button>\n                            <Radio.Button value={false} onClick={() => this.setState({ frasePrAct: false })}>Desactivada</Radio.Button>\n                        </Radio.Group>\n                    </Form.Item>\n                    <Button onClick={this.guardarDatos}>Guardar</Button>\n                </Frame>\n            </Layout>\n        )\n    }\n}\n\nconst mapStateToProps = state => {\n    return {\n        usuarios: state.usuarios\n    }\n}\n\nexport default connect(mapStateToProps)(EditUsuario)","import React, { Component } from 'react'\nimport { getToken } from './utils/auth';\nimport { Layout } from 'antd'\nimport Frame from './Frame';\n\n\nclass Analitica extends Component{\n    render(){\n        return(\n            <Layout style={{height:\"100vh\"}}>\n                <Frame isLogged={ getToken() ? true : false }>\n                    <h1>Analitica</h1>\n                </Frame>\n            </Layout>\n        )\n    }\n}\n\nexport default Analitica","import React, { Component } from 'react'\nimport { Select, Form, DatePicker, TimePicker, Button, message } from 'antd'\nimport { connect } from 'react-redux'\nimport moment from 'moment'\nimport { getUserInfo } from '../utils/auth';\nimport request from '../utils/request';\n\nclass ModuloRegistros extends Component{\n\n    addRegistro = async () => {\n        const idUser = this.props.usuario || this.state.selectedUser._id || undefined\n        if(![this.state.fechaNuevoRegistro, this.state.horaEntradaNuevoRegistro, this.state.horaSalidaNuevoRegistro, idUser].includes(undefined)){\n            const fechaEntrada = this.state.fechaNuevoRegistro.clone().hour(this.state.horaEntradaNuevoRegistro.hour()).minute(this.state.horaEntradaNuevoRegistro.minute())\n            const fechaSalida = this.state.fechaNuevoRegistro.clone().hour(this.state.horaSalidaNuevoRegistro.hour()).minute(this.state.horaSalidaNuevoRegistro.minute())\n\n            const ePasado = fechaEntrada.isBefore(moment())\n            const sPasado = fechaSalida.isBefore(moment())\n            const eAntesDeS = fechaEntrada.isBefore(fechaSalida)\n\n            if( ePasado && sPasado && eAntesDeS ){\n                const registroEntrada = {\n                    user: idUser,\n                    fecha: moment.utc(fechaEntrada).format(),\n                    ultimoEditor: getUserInfo()._id,\n                    aprobado: getUserInfo().manager ? true : false\n                }\n                const registroSalida = {\n                    user: idUser,\n                    fecha: moment.utc(fechaSalida).format(),\n                    ultimoEditor: getUserInfo()._id,\n                    aprobado: getUserInfo().manager ? true : false\n                }\n\n                try{\n                    const respEntrada = await request(\"/registros\", { method: \"POST\", body: registroEntrada })\n                    const respSalida = await request(\"/registros\", { method: \"POST\", body: registroSalida })\n                    // console.log({ respEntrada, respSalida })\n                    if( getUserInfo().manager === true ){\n                        message.success(\"El registro se añadió correctamente\")\n                    }\n                    else {\n                        message.success(\"El registro se añadió correctamente, actualmente está pendiente de aprobación\")\n                    }\n                    if(this.props.cerrarModal){ this.props.cerrarModal() }\n                    this.setState({ \n                        fechaNuevoRegistro: undefined,\n                        horaEntradaNuevoRegistro: undefined,\n                        horaSalidaNuevoRegistro: undefined\n                    })\n                }\n                catch(err){\n                    console.log(err)\n                    message.error(\"Se produjo un error durante el guardado del registro\")\n                }\n            }\n            else{\n                if(!ePasado){ message.error(\"La hora de entrada es inválida\") }\n                if(!sPasado){ message.error(\"La hora de salida es inválida\") }\n                if(!eAntesDeS ){ message.error(\"La hora de entrada ha de ser anterior a la de salida\") }\n            }\n        }\n        else{ message.warning(\"Faltan campos por completar\") }\n    }\n\n    render(){\n        const Option = Select.Option\n        return(\n            <div>\n                <div style={{ display: \"flex\", justifyContent: \"space-between\", flexWrap: \"wrap\" }}>\n                    {!this.props.usuario &&\n                        <Form.Item label=\"Usuario\">\n                            <Select\n                                showSearch\n                                style={{ width: 200, marginBottom: 20 }}\n                                placeholder=\"Selecciona un usuario\"\n                                optionFilterProp=\"children\"\n                                onChange={op => {\n                                    const selectedUser = this.props.usuarios.find(u => u.username === op)\n                                    this.setState({ selectedUser })\n\n                                }}\n                                filterOption={(input, option) => option.props.children.toLowerCase().indexOf(input.toLowerCase()) >= 0}\n                                style={{ width: 250 }}\n                            >\n                                { this.props.usuarios.map(u => \n                                    <Option value={u.username} key={u._id}>{u.username}</Option>\n                                )}\n                            </Select>\n                        </Form.Item>\n                    }\n                    <Form.Item label=\"Fecha\">\n                        <DatePicker onChange={fechaNuevoRegistro => this.setState({ fechaNuevoRegistro })} style={{ width: 250 }}/>\n                    </Form.Item>\n                    <Form.Item label=\"Hora de entrada\">\n                        <TimePicker onChange={horaEntradaNuevoRegistro => this.setState({ horaEntradaNuevoRegistro })} style={{ width: 250 }}/>\n                    </Form.Item>\n                    <Form.Item label=\"Hora de salida\">\n                        <TimePicker onChange={horaSalidaNuevoRegistro => this.setState({ horaSalidaNuevoRegistro })} style={{ width: 250 }}/>\n                    </Form.Item>\n                </div>\n                <Button onClick={this.addRegistro}>Añadir registro</Button>\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = state => {\n    return {\n        usuarios: state.usuarios\n    }\n}\n\nexport default connect(mapStateToProps)(ModuloRegistros)\n\n\n\n","import React, { Component } from 'react'\nimport { Layout, Table, Collapse, Statistic, Progress, DatePicker, Button, Modal, Popconfirm, Tag, message } from 'antd'\nimport Frame from './Frame';\nimport { connect } from 'react-redux';\nimport { socketConnect } from 'socket.io-react';\nimport moment from 'moment';\nimport { getUserInfo, getToken } from './utils/auth';\nimport ModuloRegistros from './modulosConfig/ModuloRegistros'\nimport request from './utils/request';\nimport { fetchES } from './actions';\n\nclass Registro extends Component{\n\n    state = {\n        usuarios: [],\n        userInfo: getUserInfo(),\n        mes: moment(),\n        modalVisible: false, \n        modalLoading: false\n    }\n\n    columns = [{\n        title: 'Entrada',\n        dataIndex: 'entrada',\n        key: 'entrada',\n        defaultSortOrder: 'descend',\n        sorter: (a, b) => moment(a.entrada).diff(moment(b.entrada)),\n        render: hora => moment(hora).format(\"YYYY-MM-DD, HH:mm\")\n    }, {\n        title: 'Salida',\n        dataIndex: 'salida',\n        key: 'salida',\n        sorter: (a, b) => moment(a.entrada).diff(moment(b.entrada)),\n        render: hora => hora !== \"-\" ? moment(hora).format(\"YYYY-MM-DD, HH:mm\") : \"-\"\n    }, {\n        title: 'Tiempo trabajado',\n        dataIndex: 'horas',\n        key: 'horas',\n        sorter: (a, b) => a.horas - b.horas,\n        render: horas => horas !== \"-\" ? Math.trunc(horas, 10) + \"h \" + Math.round((horas % 1) * 60) + \"m\" : \"-\"\n    }, {\n        title: 'Tiempo de descanso',\n        dataIndex: 'tiempoDescanso',\n        key: 'tiempoDescanso',\n        sorter: (a, b) => a.tiempoDescanso - b.tiempoDescanso,\n        render: tiempoDescanso => tiempoDescanso !== \"-\" ? Math.trunc(tiempoDescanso, 10) + \"h \" + Math.round((tiempoDescanso % 1) * 60) + \"m\" : \"-\"\n    }]\n\n    componentDidMount() {\n        if(this.props.es){\n            this.procesaES(this.state.mes.month(), this.state.mes.year())\n        }\n        // console.log( this.diasLaborables() )\n        // console.log( this.diasLaborables(2, 2019) )\n    }\n\n    componentDidUpdate(prevProps, prevState){\n        if(prevProps.es !== this.props.es || !(prevState.mes.isSame(this.state.mes, \"month\")) ){\n            this.procesaES(this.state.mes.month(), this.state.mes.year());\n        }\n    }\n\n    diasLaborables = (userId, month = moment().month() + 1, year = moment().year()) => {\n        const diasFestivos = (this.props.dias.filter(d => d.tipo === \"festivo\" && moment(d.fecha).month() === month)).length\n        const diasEntreSemana = Array(moment().month(month).year(year).daysInMonth()).fill(null).filter((e, i) => {\n            return moment().year(year).month(month).date(i+1).weekday() <= 4\n        }).length\n        const diasLibres = (this.props.dias.filter(d => {\n            return d.user && ( d.user._id === userId && d.aprobado === true && moment(d.fecha).month() === month)\n        })).length\n        return diasEntreSemana - diasLibres - diasFestivos\n    }\n\n    procesaES = (month = moment().month() + 1, year = moment().year()) => {\n\n        const diasDeEseMes = moment().month(month - 1).year(year).daysInMonth()\n        const usuarios = this.props.es.map(u => {\n            const duracionJornada = u.duracionjornada || 8;\n            const diasLaborables = this.diasLaborables(u._id, month, year)\n            const dias = Array(diasDeEseMes).fill(null)\n                .map((e, i) => moment().subtract(i, \"days\").format(\"YYYY-MM-DD\"))\n                .map(d => u.registros.filter(r =>  moment(r.fecha).isSame(moment(d), \"days\") && moment(r.fecha).isSame(this.state.mes, \"month\"))\n                    .sort((a, b) => {\n                        if(moment(a.fecha).isBefore(moment(b.fecha))){ return -1 }\n                        else if(moment(b.fecha).isBefore(moment(a.fecha))){ return 1 }\n                        else{ return 0 }\n                    })\n                )\n\n            const jornadas = dias.map((dia, i) => {\n                const arrayCachos = Array(Math.ceil(dia.length / 2)).fill(null).map((e, j) => {\n                    const a = moment(dia[(2*j)].fecha);\n                    const b = dia[(2*j)+1] ? moment(dia[(2*j)+1].fecha) : undefined;\n                    const m = b ? moment.duration(b.diff(a)) : ( a.isSame(moment(), \"day\") ? moment.duration(moment().diff(a)) : \"-\" )\n                    const horas = m !== \"-\" ? Math.round(m.as('hours')*100)/100 : \"-\"\n                    return {\n                        key: u._id + \"-\" + i + \"-\" + j,\n                        entrada: a.format(),\n                        aprobado: (dia[(2*j)].aprobado && (dia[(2*j)+1] ? dia[(2*j)+1].aprobado : true)) ? true : false,\n                        salida: b ? b.format() : \"-\",\n                        horas\n                    }\n                })\n\n                const tiempoDescanso = Array(arrayCachos.length > 0 ? arrayCachos.length - 1 : 0).fill(null).map((e, i) => {\n                    const comienzoDescanso = moment(arrayCachos[i].salida)\n                    const finDescanso = moment(arrayCachos[i+1].entrada)\n                    const duracionDescanso = Math.round(moment.duration(finDescanso.diff(comienzoDescanso)).as(\"hours\")*100)/100\n                    return duracionDescanso\n                }).reduce((a, b) => a + b, 0)\n\n                const arrayHoras = arrayCachos.map(c => c.horas)\n                const jornada = arrayCachos[0] ? {\n                    key: arrayCachos[0].key,\n                    entrada: arrayCachos[0].entrada,\n                    salida: arrayCachos.slice(-1)[0].salida,\n                    aprobado: arrayCachos.map(a => a.aprobado).includes(false) ? false : true,\n                    horas: !arrayHoras.includes(\"-\") ? arrayHoras.reduce((a, b) => a + b, 0) : \"-\",\n                    usuario: u.username,\n                    idsRegistros: dia.map(d => d._id),\n                    tiempoDescanso\n                } : []\n                return jornada\n            })\n\n            const horasTrabajadas = Math.round(jornadas.filter(j => j.aprobado).map(j => j.horas).filter(h => h !== \"-\" && h !== undefined).reduce((a, b) => a + b, 0) * 100 ) / 100\n            const horasMes = diasLaborables * duracionJornada\n            const porcentajeHoras = Math.round((horasTrabajadas / (diasLaborables * duracionJornada)) * 10000) / 100\n            const horasPendientes = Math.round((horasMes - horasTrabajadas) * 100 ) / 100\n\n            //console.log({ ...u, jornadas, horasTrabajadas, horasPendientes, porcentajeHoras, duracionJornada, diasLaborables })\n            return { ...u, jornadas, horasTrabajadas, horasPendientes, porcentajeHoras, duracionJornada, diasLaborables }\n        })\n        this.setState({ \n            usuarios,\n            jornadasPorAprobar: [].concat.apply([], usuarios.map(u => u.jornadas)).filter(j => !Array.isArray(j) && !j.aprobado)\n        })\n    }\n\n    jornadaPendiente = (accion, ids) => {\n        if(accion === true){\n            ids.forEach(id => {\n                request(\"/registros/\" + id, {\n                    method: \"PUT\",\n                    body: {\n                        aprobado: true\n                    }\n                }).then(data => {\n                    //console.log(data)\n                    message.success(\"Se ha aprobado la jornada correctamente\")\n                    this.props.dispatch(fetchES())\n                }).catch(err => {\n                    console.log(err)\n                    message.error(\"Ha ocurrido un error durante la aprobación de la jornada\")\n                })\n            })\n        }\n        else{\n            ids.forEach(id => {\n                request(\"/registros/\" + id, { method: \"DELETE\" }).then(data => {\n                    //console.log(data)\n                    message.success(\"Se ha denegado la jornada correctamente\")\n                    this.props.dispatch(fetchES())\n                }).catch(err => {\n                    console.log(err)\n                    message.error(\"Ha ocurrido un error durante la denegación de la jornada\")\n                })\n            })\n        }\n    }\n\n    render(){\n        const { modalVisible, modalLoading } = this.state\n        const MonthPicker = DatePicker.MonthPicker\n        return(\n            <Layout style={{height:\"100vh\"}}>\n                <Frame isLogged={ getToken() ? true : false }>\n                    <h1>Jornadas</h1>\n                    <MonthPicker placeholder=\"Seleccionar mes\" value={this.state.mes} onChange={mes => this.setState({ mes })} style={{ marginBottom: 20 }}/>\n                    {( this.state.userInfo.manager && !this.props.blueCollar) && \n                        <div>\n                            <h3>Jornadas pendientes de aprobación</h3>\n                            <Table style={{ marginBottom: \"1em\" }} dataSource={this.state.jornadasPorAprobar} locale={{\n                                emptyText: \"No hay jornadas pendientes de aprobar\"\n                            }}\n                            columns={[{\n                                title: 'Usuario',\n                                dataIndex: 'usuario',\n                                key: 'usuario',\n                            },{\n                                title: 'Día',\n                                dataIndex: 'entrada',\n                                key: 'dia',\n                                render: e => moment(e).format(\"YYYY-MM-DD\")\n                            },{\n                                title: 'Entrada',\n                                dataIndex: 'entrada',\n                                key: 'entrada',\n                                render: e => moment(e).format(\"HH:mm\")\n                            },{\n                                title: 'Salida',\n                                dataIndex: 'salida',\n                                key: 'salida',\n                                render: e => moment(e).format(\"HH:mm\")\n                            },{\n                                title: 'Horas',\n                                dataIndex: 'horas',\n                                key: 'horas',\n                            },{\n                                title: 'Acción',\n                                key: 'action',\n                                render: (text, record) => (\n                                  <span>\n                                    <Popconfirm title={`¿Estás seguro de que deseas aprobar la jornada?`} onConfirm={evt => this.jornadaPendiente(true, record.idsRegistros)}>\n                                        <Tag color=\"green\" key={`${record._id}_aceptar`}>Aceptar</Tag>\n                                    </Popconfirm>\n                                    <Popconfirm title={`¿Estás seguro de que deseas denegar jornada?`} onConfirm={evt => this.jornadaPendiente(false, record.idsRegistros) }>\n                                        <Tag color=\"volcano\" key={`${record._id}_denegar`}>Denegar</Tag>\n                                    </Popconfirm>\n                                  </span>\n                                ),\n                            }]}/>\n                        </div>\n                    }\n\n                        <Collapse>\n                        {\n                            this.state.usuarios && this.state.usuarios.filter(u => {\n                                return this.state.userInfo._id === u._id || (this.state.userInfo.manager && !this.props.blueCollar)}).map((u, i) => [\n                                <Collapse.Panel header={<div style={{ display: \"flex\", justifyContent: \"space-between\", paddingRight: \"10px\" }}>\n                                    <span>{ u.username }</span>\n                                    <div style={{ width: \"200px\",  }}>\n                                        <Progress percent={u.porcentajeHoras} />\n                                    </div>\n                                </div>} key={i}>\n                                    <div style={{ display: \"flex\", flexWrap: \"wrap\", justifyContent: \"space-evenly\" }}>\n                                        <Statistic title=\"Horas trabajadas\" value={ Math.trunc(u.horasTrabajadas, 10) + \"h \" + Math.round((u.horasTrabajadas % 1) * 60) + \"m\"  } />\n                                        <Statistic title=\"Horas pendientes\" value={ Math.trunc(u.horasPendientes, 10) + \"h \" + Math.round((u.horasPendientes % 1) * 60) + \"m\" } />\n                                        <Statistic title=\"Días laborables de este mes\" value={ u.diasLaborables } />\n                                        <Statistic title=\"Duración de jornada\" value={ u.duracionJornada + \"h\" } />\n                                    </div>\n                                    <h3 style={{marginTop: 20 }}>Desglose de jornadas</h3>\n                                    <Table key={\"table\"+i} dataSource={[].concat.apply([], u.jornadas.filter(j => j.aprobado))} columns={this.columns} />\n                                    {( this.state.userInfo._id === u._id || (this.state.userInfo.manager && !this.props.blueCollar)) && \n                                        <div style={{ display: \"flex\", justifyContent: \"center\", marginTop: 20 }}>\n                                            <Button onClick={() => this.setState({ modalVisible: true, modalUser: u._id })}>Añadir jornada</Button>\n                                        </div>\n                                    }\n                                </Collapse.Panel>,\n                            ])\n                        }\n                        </Collapse>\n                </Frame>\n                <Modal\n                    visible={modalVisible}\n                    title=\"Añadir registro\"\n                    onOk={this.handleNuevoRegistro}\n                    onCancel={() => { this.setState({ modalVisible: false })}}\n                    style={{ maxWidth: 900 }}\n                    width=\"90%\"\n                    footer={null}\n                    >\n                    <ModuloRegistros usuario={this.state.modalUser} cerrarModal={() => this.setState({ modalVisible: false })} />\n                </Modal>\n            </Layout>\n        )\n    }\n}\n\nconst mapStateToProps = state => {\n    return {\n        es: state.es,\n        dias: state.dias,\n        blueCollar: state.blueCollar\n    }\n}\n\nexport default socketConnect(connect(mapStateToProps)(Registro))","import React, { Component } from 'react'\nimport { getToken, getUserInfo } from './utils/auth';\nimport { Layout, Upload, message, Icon, Form, Input, Button } from 'antd'\nimport Frame from './Frame';\nimport request from './utils/request';\n\n\nclass Perfil extends Component{\n\n    state = {\n        loading: false,\n        nombre: getUserInfo().nombre || \"\"    \n    }\n\n    handleUpload = ({ onSuccess, onError, file }) => {\n        let imgToUpload = new FormData();\n\n        const isJPG = file.type === 'image/jpeg' || file.type === 'image/png';\n        if (!isJPG) {\n          message.error('Solo se aceptan imagenes en formato JPG y PNG');\n        }\n        const isLt2M = file.size / 1024 / 1024 < 2;\n        if (!isLt2M) {\n          message.error('Las imagenes han de ser más pequeñas de 2MB');\n        }\n\n        if( isJPG && isLt2M ){  \n            imgToUpload.append('files', file);\n            imgToUpload.append('field', \"avatar\");\n            imgToUpload.append('refId', getUserInfo()._id);\n            imgToUpload.append('ref', \"user\");\n            imgToUpload.append('source', 'users-permissions')\n            this.setState({ loading: true })\n            request(\"/upload\", {\n                method: 'POST',\n                body: imgToUpload,\n            }, false).then(data => {\n                console.log(data)\n                this.setState({ loading: false })\n                message.success(\"El avatar se actualizó correctamente.\")\n                let userInfo = getUserInfo()\n                userInfo.avatar = data[0]\n                window.localStorage.setItem(\"user\", JSON.stringify(userInfo))\n            }).catch(err => {\n                this.setState({ loading: false })\n                console.log(err)\n                message.error(\"Ocurrió un error durante la subida del nuevo avatar\")\n            });\n        }\n    }\n\n    handleSave = () => {\n        request(\"/users/\" + getUserInfo()._id, {\n            method: \"PUT\",\n            body: {\n                nombre: this.state.nombre\n            }\n        }).then(data => {\n            let userInfo = getUserInfo()\n            userInfo.nombre = this.state.nombre\n            window.localStorage.setItem(\"user\", JSON.stringify(userInfo))\n            message.success(\"Los datos se guardaron correctamente\")\n        }).catch(err => {\n            message.error(\"Ocurrió un error durante el guardado de datos\")\n            console.log(err)\n        })\n    }\n\n    render(){\n\n        const uploadButton = (\n            <div>\n              <Icon type={this.state.loading ? 'loading' : 'plus'} />\n              <div className=\"ant-upload-text\">Upload</div>\n            </div>\n        );\n        const imageUrl = this.state.imageUrl;\n        return(\n            <Layout style={{height:\"100vh\"}}>\n                <Frame isLogged={ getToken() ? true : false }>\n                    <h1>Perfil</h1>\n                    <div style={{ width: \"320px\", marginBottom: 20 }}>\n                        <Upload\n                            name=\"avatar\"\n                            listType=\"picture-card\"\n                            className=\"avatar-uploader\"\n                            showUploadList={false}\n                            onChange={this.handleChange}\n                            customRequest={this.handleUpload}\n                        >\n                            {imageUrl ? <img src={imageUrl} alt=\"avatar\" /> : uploadButton}\n                        </Upload>\n\n                        <Form.Item label=\"Nombre\" style={{ marginRight: 20 }}>\n                            <Input type=\"text\" value={ this.state.nombre } onChange={e => this.setState({ nombre: e.target.value })} />\n                        </Form.Item>\n\n                        <Button onClick={this.handleSave}>Guardar</Button>\n                    </div>\n                </Frame>\n            </Layout>\n        )\n    }\n}\n\nexport default Perfil","import React, { Component } from 'react'\nimport { getToken } from './utils/auth';\nimport { Layout, Collapse } from 'antd'\nimport Frame from './Frame';\n\n\nclass Grupos extends Component{\n\n    state = {}\n\n    render(){\n        const Panel = Collapse.Panel;\n        return(\n            <Layout style={{height:\"100vh\"}}>\n                <Frame isLogged={ getToken() ? true : false }>\n                    <h1>Configuración</h1>\n                    <Collapse defaultActiveKey={[\"grupos\"]}>\n                        <Panel key=\"grupos\" header=\"Grupos de usuarios\">\n                        \n                        </Panel>\n                        <Panel key=\"nuevoGrupo\" header=\"Nuevo grupo de usuarios\">\n                            \n                        </Panel>\n                    </Collapse>\n                </Frame>\n            </Layout>\n        )\n    }\n}\n\nexport default Grupos","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { Table, Tag, Popconfirm, Icon, Form, DatePicker, Input, Button, message } from 'antd'\nimport moment from 'moment'\nimport request from '../utils/request';\nimport { getUserInfo } from '../utils/auth'\nimport { fetchCalendario } from '../actions'\n\nclass ModuloFestivos extends Component{\n\n    state = {}\n\n    addFestivo = () => {\n        if(!this.state.nombre){ message.warning(\"No se ha asignado nombre al festivo\") }\n        else if(!this.state.fecha){ message.warning(\"No se ha seleccionado ninguna fecha\") }\n        else{\n            request(\"/dias\", {\n                method: \"POST\",\n                body: {\n                    fecha: moment.utc(this.state.fecha).format(),\n                    tipo: \"festivo\",\n                    nombre: this.state.nombre,\n                    equipo: getUserInfo().equipo,\n                    aprobado: true\n                }\n            }).then(data => {\n                //console.log(data)\n                message.success(\"El nuevo festivo se ha añadido correctamente\")\n                this.props.dispatch(fetchCalendario())\n                this.setState({ nombre: undefined, fecha: undefined })\n            }).catch(err => {\n                console.log(err)\n                message.error(\"Se ha producido un error durante la creación del nuevo festivo\")\n            })\n        }\n    }\n\n    borrarFestivo = dia => {\n        request(\"/dias/\" + dia._id, { method: \"DELETE\" })\n            .then(data => {\n                //console.log(data)\n                message.success(\"Se ha borrado el festivo correctamente\")\n                this.props.dispatch(fetchCalendario())\n            }).catch(err => {\n                console.log(err)\n                message.error(\"Ha ocurrido un error durante el borrado del festivo\")\n            })\n    }\n\n    render(){\n        return(\n            <div>\n                <h3>Lista de festivos</h3>\n                <Table dataSource={this.props.dias.filter(d => d.tipo === \"festivo\")} rowKey=\"_id\" columns={[\n                    {\n                        title: 'Nombre',\n                        dataIndex: 'nombre',\n                        key: 'nombre',\n                    }, {\n                        title: 'Día',\n                        key: 'fecha',\n                        render: dia => moment(dia.fecha).format(\"YYYY-MM-DD\")\n                    }, {\n                        key: \"botones\",\n                        render: dia => (\n                            <div key={dia._id} style={{ display: \"flex\", justifyContent: \"flex-end\" }}>\n                                <Popconfirm \n                                    title={`¿Estás seguro de que quieres borrar el día festivo?`} \n                                    onConfirm={() => this.borrarFestivo(dia)}\n                                    icon={<Icon type=\"warning\" style={{ color: 'red' }} />}\n                                >\n                                    <Tag color=\"volcano\" key={`${dia._id}_dia`}><Icon type=\"delete\" /> Borrar</Tag>\n                                </Popconfirm>\n                            </div>\n                        )\n                    }\n                ]}/>\n\n                <h3 style={{ marginTOp: 20 }}>Añadir festivo</h3>\n                <div style={{ display: \"flex\", flexWrap: \"wrap\" }}>\n                    <Form.Item label=\"Nombre\" style={{ marginRight: 20 }}>\n                        <Input type=\"text\" onChange={e => this.setState({ nombre: e.target.value })} />\n                    </Form.Item>\n                    <Form.Item label=\"Fecha\" style={{ marginRight: 20 }}>\n                        <DatePicker onChange={fecha => this.setState({ fecha })} style={{ width: 250 }} />\n                    </Form.Item>\n                    <Form.Item label=\" \" colon={false}>\n                        <Button onClick={this.addFestivo}>Añadir</Button>                \n                    </Form.Item>\n                </div>\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = state => {\n    return {\n        dias: state.dias\n    }\n}\n\nexport default connect(mapStateToProps)(ModuloFestivos)","import React, { Component } from 'react'\nimport { getToken } from './utils/auth';\nimport { Layout, Collapse } from 'antd'\nimport Frame from './Frame';\nimport ModuloFestivos from './modulosConfig/ModuloFestivos';\nimport ModuloRegistros from './modulosConfig/ModuloRegistros';\n\n\nclass Configuracion extends Component{\n\n    state = {}\n\n    render(){\n        const Panel = Collapse.Panel;\n        return(\n            <Layout style={{height:\"100vh\"}}>\n                <Frame isLogged={ getToken() ? true : false }>\n                    <h1>Configuración</h1>\n                    <Collapse>\n                        <Panel header=\"Añadir registros\">\n                            <ModuloRegistros />\n                        </Panel>\n                    </Collapse>\n                    <Collapse>\n                        <Panel header=\"Gestionar festivos\">\n                            <ModuloFestivos />\n                        </Panel>\n                    </Collapse>\n                </Frame>\n            </Layout>\n        )\n    }\n}\n\nexport default Configuracion","import { combineReducers } from 'redux'\nimport usuarios from './usuarios'\nimport dias from './dias'\nimport es from './es'\nimport documentos from './documentos'\nimport blueCollar from './blueCollar'\n\nconst rootReducer = combineReducers({\n    usuarios,\n    dias,\n    es,\n    documentos,\n    blueCollar\n})\n\nexport default rootReducer;","import { \n    CARGAR_USUARIOS\n} from \"../constants/action-types\";\n\nexport default function usuariosReducer(state = [], action) {\n    switch (action.type) {\n        case CARGAR_USUARIOS:\n            console.log(action)\n            return action.payload;\n        default:\n            return state;\n    }\n}","import { \n    CARGAR_CALENDARIO\n} from \"../constants/action-types\";\n\nexport default function diasReducer(state = [], action) {\n    switch (action.type) {\n        case CARGAR_CALENDARIO:\n            console.log(action)\n            return action.payload;\n        default:\n            return state;\n    }\n}","import { \n    CARGAR_ES\n} from \"../constants/action-types\";\n\nexport default function esReducer(state = [], action) {\n    switch (action.type) {\n        case CARGAR_ES:\n            console.log(action)\n            return action.payload;\n        default:\n            return state;\n    }\n}","import { \n    CARGAR_DOCUMENTOS\n} from \"../constants/action-types\";\n\nexport default function documentosReducer(state = [], action) {\n    switch (action.type) {\n        case CARGAR_DOCUMENTOS:\n            console.log(action)\n            return action.payload;\n        default:\n            return state;\n    }\n}","import { \n    CAMBIAR_BLUE_COLLAR\n} from \"../constants/action-types\";\n\nexport default function blueCollarReducer(state = false, action) {\n    switch (action.type) {\n        case CAMBIAR_BLUE_COLLAR:\n            return action.payload;\n        default:\n            return state;\n    }\n}","import { createStore, applyMiddleware } from 'redux'\nimport rootReducer from '../reducers/index'\nimport thunk from 'redux-thunk';\n\nconst store = createStore(\n    rootReducer,\n    {},\n    applyMiddleware(thunk)\n)\n\nexport default store","import React, { Component } from 'react';\nimport { BrowserRouter, Switch, Route } from \"react-router-dom\";\nimport Login from \"./Login\"\nimport Register from \"./Register\"\nimport FourOhFour from \"./FourOhFour\"\nimport 'antd/dist/antd.css';\nimport { LocaleProvider } from 'antd';\nimport es_ES from 'antd/lib/locale-provider/es_ES';\nimport moment from 'moment';\nimport 'moment/locale/es';\nimport { SocketProvider } from 'socket.io-react';\nimport io from 'socket.io-client';\nimport { PrivateRoute } from './PrivateRoute';\nimport Home from \"./Home\"\nimport Calendario from \"./Calendario\"\nimport NuevoUsuario from './NuevoUsuario';\nimport Documentos from './Documentos';\nimport Usuarios from './Usuarios';\nimport EditUsuario from './EditUsuario';\nimport Analitica from './Analitica';\nimport Registro from './Registro';\nimport Perfil from './Perfil';\nimport Grupos from './Grupos';\nimport Configuracion from './Configuracion';\nimport { Provider } from 'react-redux';\nimport { getUserInfo } from './utils/auth'\nimport store from './store';\nimport { fetchCalendario, fetchUsuarios, fetchES, fetchDocumentos } from './actions'\n\nmoment.locale('es');\n\nconst socket = io.connect(process.env.REACT_APP_API_URL, {\n  transports: [ 'websocket' ]\n});\n\nclass App extends Component {\n  componentDidMount(){\n    const userInfo = getUserInfo()\n    if( userInfo && userInfo.equipo ){\n      store.dispatch(fetchUsuarios())\n      store.dispatch(fetchCalendario())\n      store.dispatch(fetchES())\n      store.dispatch(fetchDocumentos())\n    }\n  }\n  render() {\n    return (\n      <Provider store={store}>\n        <LocaleProvider locale={es_ES}>\n          <SocketProvider socket={socket}>\n            <BrowserRouter>\n              <Switch>\n                <Route exact path=\"/login\" component={Login} />\n                <Route exact path=\"/register\" component={Register} />\n                <PrivateRoute exact path=\"/calendario\" component={Calendario} />\n                <PrivateRoute exact path=\"/archivos\" component={Documentos} />\n                <PrivateRoute exact path=\"/perfil\" component={Perfil} />\n                <PrivateRoute exact path=\"/usuarios\" component={Usuarios} />\n                <PrivateRoute onlyManager={true} exact path=\"/analitica\" component={Analitica} />\n                <PrivateRoute onlyManager={true} exact path=\"/grupos\" component={Grupos} />\n                <PrivateRoute onlyManager={true} exact path=\"/configuracion\" component={Configuracion} />\n                <PrivateRoute exact path=\"/usuario/:id\" component={EditUsuario} />\n                <PrivateRoute exact path=\"/registro\" component={Registro} />\n                <PrivateRoute exact path=\"/nuevousuario\" component={NuevoUsuario} />\n                <PrivateRoute exact path=\"/\" component={Home} />\n                <Route path=\"\" component={FourOhFour} />\n              </Switch>\n            </BrowserRouter>\n          </SocketProvider>\n        </LocaleProvider>\n      </Provider>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\nserviceWorker.unregister();\n"],"sourceRoot":""}